window.__require=function e(t,o,i){function n(r,c){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var d=o[r]={exports:{}};t[r][0].call(d.exports,function(e){return n(t[r][1][e]||e)},d,d.exports,e,t,o,i)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({client_login:[function(e,t,o){"use strict";cc._RF.push(t,"16103GckFRCMKUejTDXXTnB","client_login");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ClientLogin=void 0;var c,s=n("client_config"),l=n("glog"),d=n("ggame"),u=n("gmodule"),p=n("local_auth"),h=n("client_network"),y=n("client_sync");function f(){var e=null!==c&&c.apply(this,arguments)||this;return e.clientModel=null,e.clientNetwork=null,e.clientSync=null,e}r(f,c=u.GModule),f.prototype.init=function(e){this.clientModel=e,this.clientNetwork=this.clientModel.getModule(h.ClientNetwork),this.clientSync=this.clientModel.getModule(y.ClientSync)},f.prototype.requestLogin=function(e,t,o,i){var n=this;this.clientNetwork.connect(s.sClientConfig.config.serverURL,function(a){a?((a={codeRevision:0,codeBuild:0,dataRevision:0,dataBuild:0}).codeRevision=s.sClientConfig.config.codeRevision||0,a.dataRevision=s.sClientConfig.config.dataRevision||0,n.clientNetwork.slientRequest("AccountLogin.RequestLogin",{serverID:s.sClientConfig.config.serverID,channel:e,token:t,version:a,tempToken:o},function(o,a,r){l.sGLog.log("user("+e+","+t+")login result: "+r.err),0!=r.err&&n.clientNetwork.close("login error!"),i&&(d.sGGame.localModel.getModule(p.LocalAuth).tempToken=r.tempToken,i(r.err,r.playerCount))},function(){i&&i(-1,0)})):i&&i(-1,null)})},f.prototype.requestCreatePlayer=function(e,t,o,i){this.clientNetwork.request("AccountLogin.RequestCreatePlayer",{name:e,sex:0,headURL:t,recommenderID:o},function(e,t,o){0!=o.err&&!i||i(o.err)},function(){i&&i(-1)})},f.prototype.requestPlayerJoin=function(e){var t=this;this.clientModel.createRemoteData({}),this.clientNetwork.request("AccountLogin.RequestPlayerJoin",{},function(o,i,n){0==n.err?t.clientSync.reqeustSyncOnJoin(function(){t.clientModel.enterGame(),e&&e(0)}):(t.clientNetwork.close("sync usermodel failed!"),e&&e(n.err))},function(){e&&e(-1)})},r=f,a.ClientLogin=r,cc._RF.pop()},{}],client_network:[function(e,t,o){"use strict";cc._RF.push(t,"632c9IhRf5ABIm2cxuqC1D2","client_network");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ClientNetwork=void 0;var c,s=n("session_client"),l=n("glog"),d=n("gmodule"),u=n("client_sync");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.sessionClient=new s.SessionClient,e.socketDisconnectCallback=null,e.sessionRequestWaitingCallback=null,e.sessionRequestEndCallback=null,e.currentServer=null,e.clientModel=null,e}r(p,c=d.GModule),p.prototype.init=function(e){var t=this;this.clientModel=e,this.sessionClient.socketConnectedCallback=function(){l.sGLog.debug(">>>> socket_connected_callback")},this.sessionClient.socketDisconnectedCallback=function(e){l.sGLog.debug(">>>> socket_disconnected_callback"),t.sessionConnected()&&t.socketDisconnectCallback&&t.socketDisconnectCallback(e)},this.sessionClient.sessionConnectCallback=function(){l.sGLog.debug(">>>> session_connected_callback")},this.sessionClient.sessionReconnectedCallback=function(){l.sGLog.debug(">>>> session_reconnected_callback"),t.clientModel.remoteData&&t.clientModel.getModule(u.ClientSync).reqeustSyncOnReconnect()},this.sessionClient.sessionDisconnectedCallback=function(){l.sGLog.debug(">>>> session_disconnected_callback"),t.socketDisconnectCallback&&t.socketDisconnectCallback(!0)},this.sessionClient.sessionRequestWaitingCallback=function(){l.sGLog.debug(">>>> session_request_waiting_callback"),t.sessionRequestWaitingCallback&&t.sessionRequestWaitingCallback()},this.sessionClient.sessionRequestEndCallback=function(){l.sGLog.debug(">>>> session_request_end_callback"),t.sessionRequestEndCallback&&t.sessionRequestEndCallback()},this.sessionClient.responseHookCallback=function(e,o,i){l.sGLog.debug(">>>> respose_hook_callback"),t.clientModel&&i.data&&t.clientModel.dirtySyncRemoteData(i.data)},this.sessionClient.sessionHeartBeatCallback=function(){l.sGLog.log(">>>> session_heart_beat_callback"),cc.director.emit("session_heart_beat",t.sessionClient.ping)}},p.prototype.setSocketDisconnectCallback=function(e){this.socketDisconnectCallback=e},p.prototype.setSessionRequestWaitingCallback=function(e){this.sessionRequestWaitingCallback=e},p.prototype.setSessionRequestEndCallback=function(e){this.sessionRequestEndCallback=e},p.prototype.setServer=function(e){this.currentServer=e,this.sessionClient.setEndpoint(e.endpoint)},p.prototype.send=function(e,t){return this.sessionClient.send(e,t)},p.prototype.request=function(e,t,o,i){return this.sessionClient.request(e,t,o,i)},p.prototype.slientRequest=function(e,t,o,i){return this.sessionClient.slientRequest(e,t,o,i)},p.prototype.onceRequest=function(e,t,o,i){return this.sessionClient.onceRequest(e,t,o,i)},p.prototype.onceSlientRequest=function(e,t,o,i){return this.sessionClient.onceSlientRequest(e,t,o,i)},p.prototype.retry=function(e){this.sessionClient.retry(e)},p.prototype.connect=function(e,t){this.sessionClient.connect(e,t)},p.prototype.close=function(e){this.sessionClient.close(e)},p.prototype.closeSocket=function(e){this.sessionClient.closeSocket(e)},p.prototype.getRidList=function(){return this.sessionClient.getRidList()},p.prototype.socketConnected=function(){return null!=this.sessionClient.networkClient},p.prototype.sessionConnected=function(){return this.sessionClient.sessionConnected()},p.prototype.hasRetryRequest=function(){return this.sessionClient.hasRetryRequest()},p.prototype.hasNotSlientRetryRequest=function(){return this.sessionClient.hasNotSlientRetryRequest()},p.prototype.registerHandler=function(e,t){return this.sessionClient.registerHandler(e,t)},r=p,a.ClientNetwork=r,cc._RF.pop()},{}],client_sync:[function(e,t,o){"use strict";cc._RF.push(t,"68c31fyJ0VB0L7Ggs1pjsL8","client_sync");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ClientSync=void 0;var c,s=n("glog"),l=n("gmodule"),d=n("client_network");function u(){var e=null!==c&&c.apply(this,arguments)||this;return e.clientModel=null,e.clientNetwork=null,e._isDataOnline=!1,e._playerTimestamp=0,e._guildTimestamp=0,e}r(u,c=l.GModule),Object.defineProperty(u.prototype,"isDataOnline",{get:function(){return this._isDataOnline},set:function(e){this._isDataOnline=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"playerTimestamp",{get:function(){return this._playerTimestamp},set:function(e){this._isDataOnline&&(this._playerTimestamp=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"guildTimestamp",{get:function(){return this._guildTimestamp},set:function(e){this._isDataOnline&&(this._guildTimestamp=e)},enumerable:!1,configurable:!0}),u.prototype.init=function(e){this.clientModel=e},u.prototype.start=function(){this.clientNetwork=this.clientModel.getModule(d.ClientNetwork)},u.prototype.reqeustSyncOnJoin=function(e){var t=this;this.isDataOnline=!1,this.clientNetwork.request("AccountLogin.RequestSyncPlayer",{},function(o,i,n){t.clientModel.fullSyncRemoteData(n.syncData),t._requestGuildSync(e)},function(){e&&e(-1)})},u.prototype.reqeustSyncOnReconnect=function(){var e=this;this.isDataOnline=!1,this.clientNetwork.request("Player.RequestSyncPlayer",{},function(t,o,i){e.clientModel.fullSyncRemoteData(i.syncData),e._requestGuildSync()},function(){})},u.prototype._requestGuildSync=function(e){var t=this;this.clientNetwork.request("Player.RequestSyncPlayer",{},function(o,i,n){s.sGLog.log("sync usermodel result: "+n.err),t.clientModel.fullSyncRemoteData(n.syncData),t._syncFinish(e)},function(){})},u.prototype._syncFinish=function(e){this.isDataOnline=!0,e&&e(0)},r=u,a.ClientSync=r,cc._RF.pop()},{}],encourage_icon_ui:[function(e,t,o){"use strict";cc._RF.push(t,"65655xt5thCxKaoBAKO4OmQ","encourage_icon_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("client_config"),d=n("vm_encourage"),u=(p=cc._decorator).ccclass,p=(n=p.property,p.menu);function h(){var e=null!==s&&s.apply(this,arguments)||this;return e.nodeRoot=null,e.nodeRewardedVideoAdWithText=null,e.nodeRewardedVideoAd=null,e.nodeShare=null,e.encourageType=null,e}r(h,s=cc.Component),h.prototype.setEncourageType=function(e){this.encourageType!==e&&(this.encourageType=e,this.enabledInHierarchy&&this.refresh())},h.prototype.onLoad=function(){this.nodeRoot||(this.nodeRoot=this.node),this.nodeRewardedVideoAdWithText||(this.nodeRewardedVideoAdWithText=cc.find("rewarded_video_ad_with_text",this.nodeRoot)),this.nodeRewardedVideoAd||(this.nodeRewardedVideoAd=cc.find("rewarded_video_ad",this.nodeRoot)),this.nodeShare||(this.nodeShare=cc.find("share",this.nodeRoot))},h.prototype.onEnable=function(){this.refresh()},h.prototype.refresh=function(){this.nodeRewardedVideoAdWithText&&(this.nodeRewardedVideoAdWithText.active=this.encourageType===d.eEncourageType.rewardedVideoAd&&l.sClientConfig.config.rewardedVideoAdWithText),this.nodeRewardedVideoAd&&(this.nodeRewardedVideoAd.active=this.encourageType===d.eEncourageType.rewardedVideoAd&&!l.sClientConfig.config.rewardedVideoAdWithText),this.nodeShare&&(this.nodeShare.active=this.encourageType===d.eEncourageType.share)},c([n({tooltip:"\u6fc0\u52b1\u65b9\u5f0f\u8282\u70b9\n\u5b8c\u6574\u6fc0\u52b1\u89c6\u9891:rewarded_video_ad_with_text\n\u7b80\u6613\u6fc0\u52b1\u89c6\u9891:rewarded_video_ad\n\u5206\u4eab:share",type:cc.Node})],h.prototype,"nodeRoot",void 0),p=c([u,p("GFun/UI/EncourageIconUI")],h),a.default=p,cc._RF.pop()},{}],encourage_message_box_ui:[function(e,t,o){"use strict";cc._RF.push(t,"49f0bvHOQBO1q7AjVIKL3oL","encourage_message_box_ui");var i,n=e,a=t,r=o,c=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,d=n("audio_config"),u=n("i18n"),p=n("gaudio"),h=n("gnode"),y=n("gview_model"),f=n("vm_encourage"),g=n("encourage_icon_ui");function _(){var e=null!==l&&l.apply(this,arguments)||this;return e.cancelButton=null,e.confirmButton=null,e.textLabel=null,e.encourageIconUI=null,e.text="",e.encourageEntry=null,e.callback=null,e}n=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.reset=function(e,t,o){this.text=e,this.encourageEntry=t,this.callback=o},_.prototype.onLoad=function(){var e=this;this.cancelButton&&this.cancelButton.node.on("click",function(){p.sGAudio.playEffect(d.sAudioConfig.config.buttonClick),e.callback&&e.callback(!1),h.sGNode.destoryNode(e.node)}),this.confirmButton&&this.confirmButton.node.on("click",function(){p.sGAudio.playEffect(d.sAudioConfig.config.buttonClick),y.sGViewModel.getModule(f.VMEncourage).encourage(e.encourageEntry,e.encourageType,function(){e.callback&&e.callback(!0),h.sGNode.destoryNode(e.node)})})},_.prototype.onEnable=function(){this.encourageType=y.sGViewModel.getModule(f.VMEncourage).preEncourage(this.encourageEntry),this.encourageIconUI&&this.encourageIconUI.setEncourageType(this.encourageType),this.text&&this.textLabel&&(this.textLabel.string=this.text.replace("${adType}",u.i18n.t("ad."+f.eEncourageType[this.encourageType])))},_.prototype.onDisable=function(){},s([a(cc.Button)],_.prototype,"cancelButton",void 0),s([a(cc.Button)],_.prototype,"confirmButton",void 0),s([a(cc.Label)],_.prototype,"textLabel",void 0),s([a(g.default)],_.prototype,"encourageIconUI",void 0),n=s([n],_),r.default=n,cc._RF.pop()},{}],fake_ad_ui:[function(e,t,o){"use strict";cc._RF.push(t,"522a72nJ8BGH61sCVBbvAl8","fake_ad_ui");var i,n=t,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=(d=cc._decorator).ccclass,d=(n=d.property,d.menu);function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.middleLabel=null,e.closeButtonNode=null,e.callback=null,e.passTime1=0,e.passTime=0,e}r(u,s=cc.Component),u.prototype.init=function(e){this.callback=e},u.prototype.onEnable=function(){this.closeButtonNode&&(this.closeButtonNode.active=!1),this.middleLabel&&(this.middleLabel.string="this is fake ad (30)")},u.prototype.onDisable=function(){},u.prototype.update=function(e){var t;this.passTime1+=e,this.passTime+=e,.3<this.passTime1&&(this.passTime1=0,t=30-this.passTime,t=Math.max(t,0),this.closeButtonNode&&(this.closeButtonNode.active=0===t),e="this is fake ad ("+Math.floor(t)+")",this.middleLabel&&(this.middleLabel.string=e),this.callback&&0===t&&(this.callback&&this.callback(),this.callback=null))},c([n(cc.Label)],u.prototype,"middleLabel",void 0),c([n(cc.Node)],u.prototype,"closeButtonNode",void 0),d=c([l,d("Game/Launch/FakeAdUI")],u),a.default=d,cc._RF.pop()},{}],guide_speak_ui:[function(e,t,o){"use strict";cc._RF.push(t,"7c6256Kj/NMf5fEL0Weja7Y","guide_speak_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("audio_config"),d=n("gaudio"),u=n("gnode"),p=n("gres"),h=(y=cc._decorator).ccclass,y=(n=y.property,y.menu);function f(){var e=null!==s&&s.apply(this,arguments)||this;return e.animation=null,e.nodeSpeakContent=null,e.labelSpeakContent=null,e.skeleton=null,e.buttonClick=null,e.nodePressTip=null,e._finishCallback=null,e._showTime=0,e._isEntered=!1,e._speakDuration=0,e._canClick=!1,e._textVisibleSpeed=15,e._textVisibleSpeedScale=1,e}r(f,s=cc.Component),f.prototype.onLoad=function(){var e=this;this.buttonClick&&this.buttonClick.node.on("click",function(){d.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),e._canClick?e._finishSpeak():e._textVisibleSpeedScale=10}),this.nodePressTip&&(this.nodePressTip.active=!1)},f.prototype.onEnable=function(){this._cleanup(),this._showEnter()},f.prototype.onDisable=function(){p.sGRes.targetOff(this),this._isEntered=!1},f.prototype.update=function(e){this._isEntered&&!this._canClick&&(this._showTime+=e*this._textVisibleSpeedScale,this._showTime>=this._speakDuration?(this._canClick=!0,this.nodePressTip&&(this.nodePressTip.active=!0),this.skeleton&&this.skeleton.clearTrack(1),this.labelSpeakContent&&u.sGNode.setLabelForceUpdateRenderData(this.labelSpeakContent,this._text)):(e=this._textVisibleSpeed*this._showTime,this.labelSpeakContent&&u.sGNode.setLabelForceUpdateRenderData(this.labelSpeakContent,this._text.substr(0,e))))},f.prototype._cleanup=function(){var e;this.nodeSpeakContent&&(e=cc.Size.ZERO,this.labelSpeakContent&&(u.sGNode.setLabelForceUpdateRenderData(this.labelSpeakContent,this._text),e=this.labelSpeakContent.node.getContentSize()),this.nodeSpeakContent.setContentSize(e),u.sGNode.updateLayout(this.nodeSpeakContent,this.nodeSpeakContent)),this.labelSpeakContent&&u.sGNode.setLabelForceUpdateRenderData(this.labelSpeakContent,""),this._showTime=0,this._canClick=!1,this._textVisibleSpeedScale=1,this.nodePressTip&&(this.nodePressTip.active=!1)},f.prototype.show=function(e,t){this._text=e,this._finishCallback=t,this._isEntered&&(this._cleanup(),this._refreshText())},f.prototype.hide=function(e){this._showExit(e)},f.prototype._showAnimationEnter=function(){var e=this;this.animation?(this.animation.play("guide_dialog_box_anim"),this.animation.targetOff(this),this.animation.on(cc.Animation.EventType.FINISHED,function(){e.animation.targetOff(e),e._showEnterEnd()},this)):this._showEnterEnd()},f.prototype._showSkeletonEnter=function(){var e=this;this.skeleton&&(this.skeleton.setAnimation(0,"enter",!1),this.skeleton.setCompleteListener(void 0),this.skeleton.setCompleteListener(function(){e.skeleton.setCompleteListener(void 0),e.skeleton.setAnimation(0,"idle",!0)}))},f.prototype._showEnterEnd=function(){this._isEntered=!0,this._refreshText()},f.prototype._showEnter=function(){this._showSkeletonEnter(),this._showAnimationEnter()},f.prototype._showAnimationExit=function(e){var t=this;this.animation&&(this.animation.play("guide_dialog_box_close_anim"),this.animation.targetOff(this),this.animation.on(cc.Animation.EventType.FINISHED,function(){t.animation.targetOff(t),t._showExitEnd(e)},this))},f.prototype._showSkeletonExit=function(){var e=this;this.skeleton&&(this.skeleton.setAnimation(0,"exit",!1),this.skeleton.setCompleteListener(void 0),this.skeleton.setCompleteListener(function(){e.skeleton.setCompleteListener(void 0)}))},f.prototype._showExitEnd=function(e){e&&e()},f.prototype._showExit=function(e){this._showAnimationExit(e),this._showSkeletonExit()},f.prototype._refreshText=function(){this._speakDuration=this._text.length/this._textVisibleSpeed,this.skeleton&&this.skeleton.setAnimation(1,"speak",!0)},f.prototype._finishSpeak=function(){this._finishCallback&&this._finishCallback()},c([n({type:cc.Animation,tooltip:"\u52a8\u753b\u8282\u70b9"})],f.prototype,"animation",void 0),c([n({type:cc.Node,tooltip:"\u6587\u672c\u5185\u5bb9"})],f.prototype,"nodeSpeakContent",void 0),c([n({type:cc.Label,tooltip:"\u6587\u672c\u5185\u5bb9"})],f.prototype,"labelSpeakContent",void 0),c([n({type:sp.Skeleton,tooltip:"\u52a8\u753b\u5c55\u793a\u5bf9\u8c61"})],f.prototype,"skeleton",void 0),c([n({type:cc.Button,tooltip:"\u5c4f\u5e55\u70b9\u51fb\u8282\u70b9"})],f.prototype,"buttonClick",void 0),c([n({type:cc.Node,tooltip:"\u70b9\u51fb\u4e0b\u4e00\u6b65"})],f.prototype,"nodePressTip",void 0),y=c([h,y("GFun/UI/GuideSpeakUI")],f),a.default=y,cc._RF.pop()},{}],guide_ui:[function(e,t,o){"use strict";cc._RF.push(t,"2bad99GOhdBAat13HsvEeTG","guide_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("audio_config"),d=n("client_config"),u=n("i18n"),p=n("gaudio"),h=n("glog"),y=n("gnode"),f=n("common_guide_config"),g=n("guide_speak_ui"),_=(m=cc._decorator).ccclass,m=(n=m.property,m.menu);function v(){var e=null!==s&&s.apply(this,arguments)||this;return e.clipDisplayRootNode=null,e.clipClickRootNode=null,e.clipClickNode=null,e.clipClickBG=null,e.clipDisplayNode=null,e.clipDisplayDecorateNode=null,e.clipClickDecorateNode=null,e.clipDisplayAddSize=new cc.Size(0,0),e.clickOutAreaTipNode=null,e.noClipClickNode=null,e.decorateNodeArray=new Array,e.textLabelArray=new Array,e.textRichTextArray=new Array,e.skipButton=null,e.speakUI=null,e.displayNode=null,e.clickNode=null,e.entry=null,e.animCompleted=!1,e.lockScreen=null,e.clipScreen=null,e._clickOutAreaTimes=0,e._willClose=!1,e}r(v,s=cc.Component),v.prototype.init=function(e,t,o,i,n,a){this.node.activeInHierarchy&&this._cleanup(),this.entry=e,this.displayNode=t||o,this.clickNode=o,this.completeCallback=i,this.skipCallback=n,this._closeCallback=a,this.node.activeInHierarchy&&this._refresh()},v.prototype.onLoad=function(){var e=this;this.lockScreen=this.noClipClickNode,this.clipScreen=this.clipClickBG,this.skipButton&&(this.skipButton.node.on("click",function(){p.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),e._willClose=!0,e.skipCallback&&e.skipCallback()}),this.skipButton.node.active=!1)},v.prototype._cleanup=function(){var e;this.clipDisplayRootNode&&(this.clipDisplayRootNode.active=!1),this.clipClickRootNode&&(this.clipClickRootNode.active=!1),this.clipClickNode&&(this.clipClickNode.active=!1),this.clipDisplayNode&&(this.clipDisplayNode.active=!1),this.clickNode&&this.clickNode.targetOff(this),this.clipScreen&&this.clipScreen.targetOff(this),this.lockScreen&&this.lockScreen.targetOff(this),!this.clipDisplayNode||(e=this.clipDisplayNode.getComponent(cc.Animation))&&e.targetOff(this)},v.prototype._addClickOutAreaTimes=function(){this._clickOutAreaTimes++,1<this._clickOutAreaTimes&&this.skipButton&&d.sClientConfig.config.devMode&&(this.skipButton.node.active=!0)},v.prototype._refresh=function(){var e=this;this._willClose=!1,this._clickOutAreaTimes=0,this.skipButton&&(this.skipButton.node.active=!1);var t,o,i,n,a,r=!1,c=!1;this.entry.guideMode===f.sGuideMode.clickClipNodeNext?(this.clickNode?(t=cc.Node.EventType.TOUCH_START,this.clickNode.getComponent(cc.Button)?t="click":this.clickNode.getComponent(cc.Toggle)&&(t="toggle"),this.clickNode.on(t,function(){e._complete(e.entry.clickNextStepID,!1)},this),this.clipScreen.on(cc.Node.EventType.TOUCH_START,function(){var t;h.sGLog.log("\u8bf7\u70b9\u51fb\u533a\u57df\u5185"),e.clickOutAreaTipNode&&0==e.clickOutAreaTipNode.active&&(e.clickOutAreaTipNode.active=!0,(t=e.clickOutAreaTipNode.getComponent(cc.Animation))&&(t.play(),t.on("finished",function(){e.clickOutAreaTipNode.active=!1},e))),e._addClickOutAreaTimes()},this),r=!1):(r=!0,this.lockScreen.on(cc.Node.EventType.TOUCH_START,function(){e._complete(e.entry.clickNextStepID,!1),p.sGAudio.playEffect(l.sAudioConfig.config.buttonClick)},this)),this.entry.clickNode&&this.clickNode||h.sGLog.error("guide mode clickClipNodeNext nodeName is nil")):this.entry.guideMode===f.sGuideMode.clickLockScreenNext?(r=!0,this.lockScreen.on(cc.Node.EventType.TOUCH_START,function(){e._complete(e.entry.clickNextStepID,!1),p.sGAudio.playEffect(l.sAudioConfig.config.buttonClick)},this),this.clickNode&&this.clipScreen.on(cc.Node.EventType.TOUCH_START,function(){e._complete(e.entry.clickNextStepID,!1),p.sGAudio.playEffect(l.sAudioConfig.config.buttonClick)},this)):this.entry.guideMode===f.sGuideMode.checkNextWithoutLockScreen?(r=!1,this.clickNode&&this.clipScreen.on(cc.Node.EventType.TOUCH_START,function(){var t;h.sGLog.log("\u8bf7\u70b9\u51fb\u533a\u57df\u5185"),e.clickOutAreaTipNode&&0==e.clickOutAreaTipNode.active&&(e.clickOutAreaTipNode.active=!0,(t=e.clickOutAreaTipNode.getComponent(cc.Animation))&&(t.play(),t.on("finished",function(){e.clickOutAreaTipNode.active=!1},e))),e._addClickOutAreaTimes()}),this.entry.guideStepUpdate||h.sGLog.error("guide mode checkNextWithoutLockScreen updateNextStep is nil")):this.entry.guideMode===f.sGuideMode.checkNextWithLockScreen?(r=!0,this.entry.guideStepUpdate||h.sGLog.error("guide mode checkNextWithLockScreen updateNextStep is nil")):this.entry.guideMode===f.sGuideMode.clickSpeakNext&&(c=r=!0),c?this.speakUI&&(this.speakUI.show(u.i18n.t(this.entry.text),function(){e._complete(e.entry.clickNextStepID,!1)}),this.speakUI.node.active=!0):this.speakUI&&(this.speakUI.node.active=!1),this.displayNode?(n=(c=this.displayNode.getBoundingBoxToWorld()).size,a=c.center,this.clipDisplayRootNode&&(this.clipDisplayRootNode.active=!0,o=y.sGNode.convertToNodeSpaceAR(this.clipDisplayRootNode.getParent(),a),this.clipDisplayRootNode.setAnchorPoint(cc.v2(.5,.5)),this.clipDisplayRootNode.setPosition(o)),this.clipDisplayNode&&(this.clipDisplayNode.active=!0,this.clipDisplayNode.setContentSize(new cc.Size(n.width+this.clipDisplayAddSize.width,n.height+this.clipDisplayAddSize.height)),this.clipDisplayNode.setAnchorPoint(cc.v2(.5,.5)),(v=this.clipDisplayNode.getComponent(cc.Animation))&&!this.entry.dontPlayClipAnim?(this.lockScreen&&(this.lockScreen.active=!0),this.animCompleted=!1,v.play(),!this.clipDisplayDecorateNode||(c=this.clipDisplayDecorateNode.getComponent(cc.Animation))&&c.play(),!this.clipClickDecorateNode||(i=this.clipClickDecorateNode.getComponent(cc.Animation))&&i.play(),v.on("finished",function(){e.animCompleted=!0,e.lockScreen&&(e.lockScreen.active=r)},this)):(this.animCompleted=!0,this.lockScreen&&(this.lockScreen.active=r))),this.clipDisplayDecorateNode&&(this.clipDisplayDecorateNode.setContentSize(new cc.Size(n.width+this.clipDisplayAddSize.width,n.height+this.clipDisplayAddSize.height)),this.clipDisplayDecorateNode.setAnchorPoint(cc.v2(.5,.5)))):(this.animCompleted=!0,this.lockScreen&&(this.lockScreen.active=r),this.clipDisplayRootNode&&(this.clipDisplayRootNode.active=!1)),this.clickNode?(n=(i=this.clickNode.getBoundingBoxToWorld()).size,a=i.center,this.clipClickRootNode&&(this.clipClickRootNode.active=!0,o=y.sGNode.convertToNodeSpaceAR(this.clipClickRootNode.getParent(),a),this.clipClickRootNode.setAnchorPoint(cc.v2(.5,.5)),this.clipClickRootNode.setPosition(o)),this.clipClickNode&&(this.clipClickNode.active=!0,this.clipClickNode.setContentSize(n),this.clipDisplayNode.setAnchorPoint(cc.v2(.5,.5))),this.clipClickDecorateNode&&(this.clipClickDecorateNode.setContentSize(new cc.Size(n.width,n.height)),this.clipClickDecorateNode.setAnchorPoint(cc.v2(.5,.5)))):this.clipClickRootNode&&(this.clipClickRootNode.active=!1);for(var s=0,d=this.decorateNodeArray;s<d.length;s++){var g=d[s];g&&(g.active=!1)}if(this.entry.showNodeIndexArray)for(var _=0,m=this.entry.showNodeIndexArray;_<m.length;_++){var v,G=m[_];this.decorateNodeArray[G]&&(this.decorateNodeArray[G].active=!0,(v=this.decorateNodeArray[G].getComponent(cc.Animation))&&v.play())}this.clickOutAreaTipNode&&(this.clickOutAreaTipNode.active=!1);for(var b=u.i18n.t(this.entry.text),C=0,k=this.textLabelArray;C<k.length;C++){var A=k[C];A&&A.node.active&&y.sGNode.setLabelForceUpdateRenderData(A,b)}for(var M=0,T=this.textRichTextArray;M<T.length;M++){var S=T[M];S&&S.node.active&&(S.string=b)}},v.prototype.onEnable=function(){var e=this.node.getComponent(cc.Widget);e&&e.updateAlignment(),this._refresh()},v.prototype.onDisable=function(){this._cleanup(),this.node.targetOff(this),cc.director.targetOff(this),this._closeCallback&&this._closeCallback()},v.prototype.updateNextStep=function(){var e;this.entry.guideMode!==f.sGuideMode.checkNextWithoutLockScreen&&this.entry.guideMode!==f.sGuideMode.checkNextWithLockScreen||!this.entry.guideStepUpdate||-1!==(e=this.entry.guideStepUpdate())&&this._complete(e,!0)},v.prototype.update=function(){this.updateNextStep(),this._willClose&&y.sGNode.destoryNode(this.node)},v.prototype.lateUpdate=function(){var e,t,o,i;this.displayNode&&(o=(t=this.displayNode.getBoundingBoxToWorld()).size,i=t.center,this.clipDisplayRootNode&&(this.clipDisplayRootNode.active=!0,e=y.sGNode.convertToNodeSpaceAR(this.clipDisplayRootNode.getParent(),i),this.clipDisplayRootNode.setAnchorPoint(cc.v2(.5,.5)),this.clipDisplayRootNode.setPosition(e)),this.clipDisplayNode&&(this.clipDisplayNode.active=!0,this.clipDisplayNode.setContentSize(new cc.Size(o.width+this.clipDisplayAddSize.width,o.height+this.clipDisplayAddSize.height)),this.clipDisplayNode.setAnchorPoint(cc.v2(.5,.5))),this.clipDisplayDecorateNode&&(this.clipDisplayDecorateNode.setContentSize(new cc.Size(o.width+this.clipDisplayAddSize.width,o.height+this.clipDisplayAddSize.height)),this.clipDisplayDecorateNode.setAnchorPoint(cc.v2(.5,.5)))),this.clickNode&&(o=(t=this.clickNode.getBoundingBoxToWorld()).size,i=t.center,this.clipClickRootNode&&(this.clipClickRootNode.active=!0,e=y.sGNode.convertToNodeSpaceAR(this.clipClickRootNode.getParent(),i),this.clipClickRootNode.setAnchorPoint(cc.v2(.5,.5)),this.clipClickRootNode.setPosition(e)),this.clipClickNode&&(this.clipClickNode.active=!0,this.clipClickNode.setContentSize(o),this.clipDisplayNode.setAnchorPoint(cc.v2(.5,.5))),this.clipClickDecorateNode&&(this.clipClickDecorateNode.setContentSize(new cc.Size(o.width,o.height)),this.clipClickDecorateNode.setAnchorPoint(cc.v2(.5,.5))))},v.prototype._complete=function(e,t){(this.animCompleted||t)&&(this._willClose=!0,this.completeCallback&&this.completeCallback(e))},c([n(cc.Node)],v.prototype,"clipDisplayRootNode",void 0),c([n(cc.Node)],v.prototype,"clipClickRootNode",void 0),c([n(cc.Node)],v.prototype,"clipClickNode",void 0),c([n(cc.Node)],v.prototype,"clipClickBG",void 0),c([n(cc.Node)],v.prototype,"clipDisplayNode",void 0),c([n(cc.Node)],v.prototype,"clipDisplayDecorateNode",void 0),c([n(cc.Node)],v.prototype,"clipClickDecorateNode",void 0),c([n],v.prototype,"clipDisplayAddSize",void 0),c([n(cc.Node)],v.prototype,"clickOutAreaTipNode",void 0),c([n(cc.Node)],v.prototype,"noClipClickNode",void 0),c([n(cc.Node)],v.prototype,"decorateNodeArray",void 0),c([n(cc.Label)],v.prototype,"textLabelArray",void 0),c([n(cc.RichText)],v.prototype,"textRichTextArray",void 0),c([n(cc.Button)],v.prototype,"skipButton",void 0),c([n({type:g.default,tooltip:"\u5f15\u5bfcnpc\u804a\u5929\u754c\u9762"})],v.prototype,"speakUI",void 0),m=c([_,m("GFun/UI/GuideUI")],v),a.default=m,cc._RF.pop()},{}],launch_login_ui:[function(e,t,o){"use strict";cc._RF.push(t,"240ddDHR6dIoJNZqRQzLn5X","launch_login_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("audio_config"),d=n("client_config"),u=n("event_config"),p=n("i18n"),h=n("ui_controller"),y=n("gui"),f=n("ganalytics"),g=n("gaudio"),_=n("ghot_update"),m=n("glog"),v=n("gnode"),G=n("gtime"),b=n("thirdplatform"),C=n("thirdplatform_util"),k=n("ggame"),A=n("gview_model"),M=n("vm_app"),T=n("local_auth"),S=n("local_info"),D=n("vm_auth"),w=n("vm_cloud_storage"),L=n("vm_login"),R=n("vm_ui"),E=(O=cc._decorator).ccclass,O=(n=O.property,O.menu);function N(){var e=null!==s&&s.apply(this,arguments)||this;return e.newButton=null,e.loginButton=null,e.versionLabel=null,e.btnAuthorize=null,e.silentAuthDelayTime=3,e.isSuitableAgeShowing=!1,e.silentAuthed=!1,e.passTime=0,e}r(N,s=cc.Component),N.prototype.onLoad=function(){var e=this;A.sGViewModel.start(),this.newButton&&(this.newButton.node.active=!1,this.newButton.node.on("click",function(){m.sGLog.log("new button"),g.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),G.sGTime.resetStartTime(),k.sGGame.localModel.clear(),k.sGGame.localModel.reload(),A.sGViewModel.restart(),e.newButton.node.active=!1})),this.loginButton&&(this.loginButton.node.active=!1,this.loginButton.node.on("click",function(){m.sGLog.log("login button"),g.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),e.authAndEnterGame(b.eAuthType.nil)}))},N.prototype.onEnable=function(){v.sGNode.updateWidgetImmediately(this.node),this.versionLabel&&(_.sGHotUpdate.hotUpdateEnabled()?(this.versionLabel.string="Res: v"+_.sGHotUpdate.version,this.versionLabel.node.active=!0):this.versionLabel.node.active=!1),v.sGNode.updateWidgetImmediately(this.node),d.sClientConfig.config.devMode&&this._showLoginButton()},N.prototype.onDisable=function(){},N.prototype.update=function(e){this.passTime+=e,!d.sClientConfig.config.devMode&&!this.silentAuthed&&this.passTime>=this.silentAuthDelayTime&&!this.isSuitableAgeShowing&&(this.silentAuthed=!0,this.silentAuthAndEnterGame())},N.prototype.onDestroy=function(){this.btnAuthorize&&C.sThirdPlatformUtil.releaseAuthButton(this.btnAuthorize)},N.prototype.authAndEnterGame=function(e){var t=this;this._auth(e,function(e){e&&t._authFinish()})},N.prototype.silentAuthAndEnterGame=function(){var e=this;this._auth(b.eAuthType.nil,function(t){t?e._authFinish():e._showLoginButton()})},N.prototype._auth=function(e,t){A.sGViewModel.getModule(R.VMUI).openLoadingUI("loginAuth"),A.sGViewModel.getModule(D.VMAuth).auth(e,function(e){A.sGViewModel.getModule(R.VMUI).closeLoadingUI("loginAuth"),e?A.sGViewModel.getModule(w.VMCloudStorage).checkStorageID(t):t&&t(!1)})},N.prototype._enterScene=function(){k.sGGame.localModel.enterGame(),A.sGViewModel.getModule(M.VMApp).enterGameScene("login",function(){A.sGViewModel.getModule(w.VMCloudStorage).autoSave()})},N.prototype._showLoginButton=function(){var e=this;this.newButton&&(this.newButton.node.active=d.sClientConfig.config.devMode);var t=k.sGGame.localModel.getModule(T.LocalAuth).authType;t===b.eAuthType.nil&&(t=C.sThirdPlatformUtil.getAuthType()[0]),this.loginButton&&(this.loginButton.node.active=!0,v.sGNode.updateWidgetImmediately(this.loginButton.node),console.log("sThirdPlatformUtil.createAuthButton start"),this.btnAuthorize=C.sThirdPlatformUtil.createAuthButton(t,v.sGNode.convertToWorldSpace(this.loginButton.node,cc.Vec2.ZERO),this.loginButton.node.getContentSize(),function(t){g.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),t&&e._authFinish()}),console.log("sThirdPlatformUtil.createAuthButton end"),this.btnAuthorize&&(this.loginButton.interactable=!1))},N.prototype._authFinish=function(){var e=this;this.newButton&&(this.newButton.node.active=!1),this.loginButton&&(this.loginButton.node.active=!1),this.btnAuthorize&&(C.sThirdPlatformUtil.releaseAuthButton(this.btnAuthorize),this.btnAuthorize=null),A.sGViewModel.getModule(L.VMLogin).login(function(t){t?(C.sThirdPlatformUtil.onShare(function(){var e,t=p.i18n.t("friend.shareTitle"),o=k.sGGame.clientModel.remoteData;return o&&(p.i18n.t("friend.addFriendShareTitle").replace("${playerName}",o.info.name),e="cmd=addFriend&pid="+o.info.oid+"&name="+o.info.name),{title:t,query:e}}),t=k.sGGame.localModel.getModule(S.LocalInfo).getPlayDayCountForReport(),f.sGAnalytics.reportAnalytics(u.sEventConfig.config.joinGame,{days:t}),e._enterScene()):e._showLoginButton()})},N.prototype.onSuitableAgeButton=function(){var e=this;this.isSuitableAgeShowing=!0,y.sGUI.openDialogUI("prefabs/ui/fcn_bottom",function(t){t?t.getComponent(h.default).setCloseCallback(function(){e.isSuitableAgeShowing=!1}):e.isSuitableAgeShowing=!1},this)},c([n(cc.Button)],N.prototype,"newButton",void 0),c([n(cc.Button)],N.prototype,"loginButton",void 0),c([n(cc.Label)],N.prototype,"versionLabel",void 0),O=c([E,O("Game/Launch/LaunchLoginUI")],N),a.default=O,cc._RF.pop()},{}],local_ad:[function(e,t,o){"use strict";cc._RF.push(t,"d6d5bMn+jlHqLfYKl8RQBvY","local_ad");var i,n=e,a=t,r=o;i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalAd=r.LocalPlayerAdRecord=r.sLocalPlayerAdEvent=void 0;var c,s=n("thirdplatform_util"),l=n("ggame"),d=n("ggame_data");function u(){this.oid=0,this.rewardedVideoAdTimes=0,this.totalTimes=0,this.todayAdTimes=0}function p(){var e=null!==c&&c.apply(this,arguments)||this;return e._dataDirty=!1,e.localModel=null,e}n=n("gmodule"),r.sLocalPlayerAdEvent={rewardedVideoAdTimesChanged:"sLocalPlayerAdEvent.rewardedVideoAdTimesChanged"},r.LocalPlayerAdRecord=u,a(p,c=n.GModule),p.prototype.init=function(e){d.sGGameData.addTable(d.sGGameDataType.local,"playerAd",new u),this.localModel=e},p.prototype.load=function(){this._data=this.localModel.localData.playerAd},p.prototype.save=function(){this._dataDirty&&(this._dataDirty=!1,this.localModel.database.update("playerAd",this._data))},p.prototype.start=function(){},p.prototype.stop=function(){l.sGGame.targetOff(this)},p.prototype.dailyClear=function(){this._data.rewardedVideoAdTimes=0,this._data.todayAdTimes=0,this._dataDirty=!0},p.prototype.canShowRewardedVideoAd=function(){return this._data.rewardedVideoAdTimes<5e4&&s.sThirdPlatformUtil.canShowRewardedVideoAd()},p.prototype.addRewardedVideoAdShownCount=function(){this._data.rewardedVideoAdTimes++,this._dataDirty=!0,l.sGGame.emit(r.sLocalPlayerAdEvent.rewardedVideoAdTimesChanged)},p.prototype.onAdFinish=function(){return this._data.totalTimes++,this._data.todayAdTimes++,this._dataDirty=!0,this._data.totalTimes},Object.defineProperty(p.prototype,"totalTimes",{get:function(){return this._data.totalTimes},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"todayAdTimes",{get:function(){return this._data.todayAdTimes},enumerable:!1,configurable:!0}),p.prototype.isRewardedVideoAdReady=function(){return this.canShowRewardedVideoAd()&&s.sThirdPlatformUtil.isRewardedVideoAdReady()},p.prototype.fixAdTime=function(e){l.sGGame.emit("fixAdTime",e)},a=p,r.LocalAd=a,cc._RF.pop()},{}],local_auth:[function(e,t,o){"use strict";cc._RF.push(t,"81f87ZnvslAUq3b1Yzds1so","local_auth");var i,n=e,a=t,r=o;function c(){this.authType=-1,this.saveCloudDataTime=0,this.tempToken=""}i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalAuth=r.LocalAuthRecord=void 0;var s,l=n("gdevice"),d=n("ggame_data");function u(){var e=null!==s&&s.apply(this,arguments)||this;return e._data=null,e._dataDirty=!1,e.localModel=null,e}n=n("gmodule"),r.LocalAuthRecord=c,a(u,s=n.GModule),Object.defineProperty(u.prototype,"authType",{get:function(){return this._data.authType},set:function(e){this._data.authType=e,this._dataDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"openIDType",{get:function(){return this._data.openIDType},set:function(e){this._data.openIDType=e,this._dataDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"openID",{get:function(){return this._data.openID},set:function(e){this._data.openID=e,this._dataDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"localUUID",{get:function(){return this._data.localUUID},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"tempToken",{get:function(){return this._data.tempToken},set:function(e){this._data.tempToken=e,this._dataDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"saveCloudDataTime",{get:function(){return this._data.saveCloudDataTime},set:function(e){this._data.saveCloudDataTime=e,this._dataDirty=!0},enumerable:!1,configurable:!0}),u.prototype.init=function(e){d.sGGameData.addTable(d.sGGameDataType.local,"playerAuth",new c),this.localModel=e},u.prototype.load=function(){this._data=this.localModel.localData.playerAuth,this._data.localUUID||(this._data.localUUID=l.sGDevice.getLocalUuid())},u.prototype.save=function(){this._dataDirty&&(this._dataDirty=!1,this.localModel.database.update("playerAuth",this._data))},a=u,r.LocalAuth=a,cc._RF.pop()},{}],local_cloud_storage:[function(e,t,o){"use strict";cc._RF.push(t,"9f06bTsrgJIx4mwnzH/VuSl","local_cloud_storage");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.LocalCloudStorage=a.sLocalCloudStorageEvent=void 0;var c,s=n("client_config"),l=n("gdata"),d=n("glog"),u=n("gtime"),p=n("thirdplatform_util"),h=n("ggame"),y=n("ggame_data"),f=n("gmodule"),g=n("local_auth");function _(){var e=null!==c&&c.apply(this,arguments)||this;return e.localModel=null,e.isLoaded=!1,e.checkConflictCallback=null,e.isSaving=!1,e._isLoading=!1,e._autoSaveEnabled=!1,e._totalDt=0,e.totalDt=0,e}a.sLocalCloudStorageEvent={loadFinish:"sCloudStorageEvent_loadFinish",remoteDataConflict:"sCloudStorage_remoteDataConflict"},r(_,c=f.GModule),_.prototype.init=function(e){this.localModel=e},_.prototype.start=function(){},_.prototype.stop=function(){this.isLoaded=!1},_.prototype.setCheckConflictCallback=function(e){this.checkConflictCallback=e},_.prototype.checkRemoteData=function(e,t,o){var i,n,r;t&&(i=this.localModel.database.fromString(e,t)),e=y.sGGameData.createData(y.sGGameDataType.local),i?l.sGData.syncDatabaseToData(i,e,!0):(l.sGData.syncDatabaseToData({},e,!0),(c=e.playerAuth).openIDType=this.localModel.getModule(g.LocalAuth).openIDType,c.openID=this.localModel.getModule(g.LocalAuth).openID),e.playerAuth&&(n=e.playerAuth.openIDType,r=e.playerAuth.openID),t=!1;var c=this.localModel.getModule(g.LocalAuth);if(c.openIDType===n&&c.openID===r?this.checkConflictCallback&&(t=!s.sClientConfig.config.skipCloudStorage&&this.checkConflictCallback(e,this.localModel.localData)):(t=!s.sClientConfig.config.skipCloudStorage,d.sGLog.log("diff save data:",c.openIDType,"->",n,c.openID,"->",r)),!t)return this.onLoadFinished(),o&&o(),!1;h.sGGame.emit(a.sLocalCloudStorageEvent.remoteDataConflict,i,o)},_.prototype.reloadRemoteData=function(e){this.onLoadFinished(),this.localModel.database.reset(e),this.localModel.reload()},_.prototype.onLoadFinished=function(){this.isLoaded=!0,h.sGGame.emit(a.sLocalCloudStorageEvent.loadFinish)},_.prototype.saveRemoteData=function(e){var t,o,i=this;h.sGGame.localModel&&this.isLoaded&&!this.isSaving&&(o=this.localModel.database.toString())?(this.isSaving=!0,t=u.sGTime.timestamp(),o={version:this.localModel.database.getVersion(),data:o,time:t},p.sThirdPlatformUtil.saveCloudStorage("save",JSON.stringify(o),function(o){i.isSaving=!1,o&&(h.sGGame.localModel.getModule(g.LocalAuth).saveCloudDataTime=t),e&&e(o)})):e&&e(!1)},_.prototype._loadRemoteData=function(e){var t=this;s.sClientConfig.config.hasCloudStorage?this._isLoading?e&&e(!1):(this.isLoaded=!1,this._isLoading=!0,p.sThirdPlatformUtil.loadCloudStorage("save",function(o,i){o?(d.sGLog.log("_loadThirdCloudStorage loadData ok"),o={version:null,data:null,time:null},i&&(o=JSON.parse(i)),t.checkRemoteData(o.version,o.data,function(){e&&e(!0),t._isLoading=!1})):(d.sGLog.log("_loadThirdCloudStorage loadData fail"),e&&e(!1),t._isLoading=!1)})):e&&e(!0)},_.prototype.loadRemoteData=function(e){this._loadRemoteData(e)},_.prototype.autoSave=function(){var e=h.sGGame.localModel.getModule(g.LocalAuth);e.openIDType&&e.openID&&(this._autoSaveEnabled=!0)},_.prototype._updateAutoSave=function(e){this._autoSaveEnabled&&(this._totalDt+=e,1<=this._totalDt&&(this._totalDt=0,this.isLoaded?this._tryAutoSave():this.loadRemoteData()))},_.prototype._tryAutoSave=function(){var e=h.sGGame.localModel.getModule(g.LocalAuth),t=u.sGTime.timestamp();e.saveCloudDataTime&&t-e.saveCloudDataTime<1e3*s.sClientConfig.config.saveRemoteDataDelayTime||this.saveRemoteData()},_.prototype.update=function(e){this._updateAutoSave(e)},r=_,a.LocalCloudStorage=r,cc._RF.pop()},{}],local_currency:[function(e,t,o){"use strict";cc._RF.push(t,"a35abvlUJRGIadZldUhM8SG","local_currency");var i,n=e,a=t,r=o;i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalCurrency=r.LocalCurrencyRecord=r.sLocalCurrencyEvent=void 0;var c,s=n("currency_config"),l=n("gnumber"),d=n("gtime"),u=n("ggame"),p=n("ggame_data");function h(){this.oid=0,this.cid="",this.value=0}function y(){var e=null!==c&&c.apply(this,arguments)||this;return e.localModel=null,e.data=null,e._dataDirty=!1,e._goldDelayDirtyTick=0,e._currencyChanged=!1,e}n=n("gmodule"),r.sLocalCurrencyEvent={notifyChangedWhenLateUpdate:"sLocalCurrencyEvent_notifyChangedWhenLateUpdate",set:"sLocalCurrencyEvent_set",changed:"sLocalCurrencyEvent_changed"},r.LocalCurrencyRecord=h,a(y,c=n.GModule),y.prototype.init=function(e){p.sGGameData.addTable(p.sGGameDataType.local,"currency",{0:new h}),this.localModel=e},y.prototype.load=function(){for(var e in this.data=this.localModel.localData.currency,s.sCurrencyConfig.config)(e=s.sCurrencyConfig.getEntry(e)).max||(e.max=1e50)},y.prototype.start=function(){},y.prototype.stop=function(){},y.prototype.save=function(){(this._dataDirty||this._goldDelayDirtyTick&&5e3<d.sGTime.timestamp()-this._goldDelayDirtyTick)&&(this._dataDirty=!1,this._goldDelayDirtyTick=0,this.localModel.database.update("currency",this.data))},y.prototype.lateUpdate=function(){this._currencyChanged&&u.sGGame.emit(r.sLocalCurrencyEvent.notifyChangedWhenLateUpdate),this._currencyChanged=!1},y.prototype._getCurrencyRecord=function(e){var t=this.data[e.id];return t||((t=new h).cid=e.id,t.value=l.sGNumber.encryptNumber(e.defaultValue),this.data[e.id]=t,this._dataDirty=!0),t},y.prototype.get=function(e){return e=this._getCurrencyRecord(e),l.sGNumber.decryptNumber(e.value)},y.prototype.set=function(e,t){var o=this._getCurrencyRecord(e);(t=t)<e.min?t=e.min:t>e.max&&(t=e.max),o.value=l.sGNumber.encryptNumber(Math.floor(t)),e.delaySave?this._goldDelayDirtyTick||(this._goldDelayDirtyTick=d.sGTime.timestamp()):this._dataDirty=!0,this._currencyChanged=!0,u.sGGame.emit(r.sLocalCurrencyEvent.set,e,t)},y.prototype._chg=function(e,t,o){var i=this._getCurrencyRecord(e),n=this.get(e);(n+=t)<e.min?n=e.min:n>e.max&&(n=e.max),i.value=l.sGNumber.encryptNumber(Math.floor(n)),e.delaySave?this._goldDelayDirtyTick||(this._goldDelayDirtyTick=d.sGTime.timestamp()):this._dataDirty=!0,this._currencyChanged=!0,u.sGGame.emit(r.sLocalCurrencyEvent.changed,e,n,t,o)},y.prototype.add=function(e,t,o){t<=0||this._chg(e,t,o)},y.prototype.use=function(e,t,o){t<=0||this._chg(e,-t,o)},a=y,r.LocalCurrency=a,cc._RF.pop()},{}],local_encourage:[function(e,t,o){"use strict";cc._RF.push(t,"3cac57rDJRNA4+XQGvwm+30","local_encourage");var i,n=e,a=t,r=o;function c(){this.oid=0,this.skipAdTimes=0}i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalEncourage=r.LocalEncourageRecord=r.LocalPlayerEncourageRecord=void 0;var s,l=n("client_config"),d=n("ggame_data");function u(){this.oid=0,this.times=0,this.todayTimes=0}function p(){var e=null!==s&&s.apply(this,arguments)||this;return e.localModel=null,e._dataDirty=!1,e}n=n("gmodule"),r.LocalPlayerEncourageRecord=c,r.LocalEncourageRecord=u,a(p,s=n.GModule),p.prototype.init=function(e){d.sGGameData.addTable(d.sGGameDataType.local,"playerEncourage",new c),d.sGGameData.addTable(d.sGGameDataType.local,"encourage",{0:new u}),this.localModel=e},p.prototype.load=function(){this.dataPlayerEncourage=this.localModel.localData.playerEncourage,this.data=this.localModel.localData.encourage},p.prototype.save=function(){this._dataDirty&&(this._dataDirty=!1,this.localModel.database.update("encourage",this.data),this.localModel.database.update("playerEncourage",this.dataPlayerEncourage))},p.prototype.getEncourageTimes=function(e,t){return(e=this.data[e])?t?e.todayTimes:e.times:0},p.prototype.addEncourageTimes=function(e){var t=this.data[e];t||((t=new u).cid=e,this.data[e]=t),t.times++,t.todayTimes++,this._dataDirty=!0},p.prototype.addSkipAdTimes=function(){this.dataPlayerEncourage.skipAdTimes++,this._dataDirty=!0},p.prototype.canSkipAd=function(){var e=l.sClientConfig.config.skipAdTimes;return e<0||this.dataPlayerEncourage.skipAdTimes<e},p.prototype.dailyClear=function(){for(var e in this.data)(e=this.data[e])&&(e.todayTimes=0);this.dataPlayerEncourage.skipAdTimes=0,this._dataDirty=!0},a=p,r.LocalEncourage=a,cc._RF.pop()},{}],local_guide:[function(e,t,o){"use strict";cc._RF.push(t,"ee33bWZ4EFEvp3PZFzmRaHz","local_guide");var i,n=e,a=t,r=o;i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalGuide=r.LocalGuideRecord=r.LocalPlayerGuideRecord=r.sGuideEvent=void 0;var c,s=n("client_config"),l=n("event_config"),d=n("ganalytics"),u=n("ggame"),p=n("ggame_data");function h(){this.oid=0}function y(){this.oid=0,this.cid=0,this.isFinished=!1}function f(){var e=null!==c&&c.apply(this,arguments)||this;return e.dataPlayerGuide=null,e.dataGuide=null,e.dataDirty=!1,e.localModel=null,e}n=n("gmodule"),r.sGuideEvent={finished:"sGuideEvent_finished"},r.LocalPlayerGuideRecord=h,r.LocalGuideRecord=y,a(f,c=n.GModule),f.prototype.init=function(e){p.sGGameData.addTable(p.sGGameDataType.local,"playerGuide",new h),p.sGGameData.addTable(p.sGGameDataType.local,"guide",{0:new y}),this.localModel=e},f.prototype.reset=function(){},f.prototype.load=function(){this.dataPlayerGuide=this.localModel.localData.playerGuide,this.dataGuide=this.localModel.localData.guide},f.prototype.save=function(){this.dataDirty&&(this.dataDirty=!1,this.localModel.database.update("playerGuide",this.dataPlayerGuide),this.localModel.database.update("guide",this.dataGuide))},f.prototype.start=function(){},f.prototype.stop=function(){},f.prototype.getGuideRecord=function(e){var t=this.dataGuide[e];return t||((t=new y).cid=e,this.dataGuide[e]=t,this.dataDirty=!0),t},f.prototype.finishGuide=function(e){var t=this.getGuideRecord(e);t&&!t.isFinished&&(t.isFinished=!0,this.dataDirty=!0,u.sGGame.emit(r.sGuideEvent.finished,e),d.sGAnalytics.reportAnalytics(l.sEventConfig.config.guideFinish,{guideID:e.toString()}))},f.prototype.isGuideFinished=function(e){return!!s.sClientConfig.config.skipGuide||!!(e=this.getGuideRecord(e))&&e.isFinished},a=f,r.LocalGuide=a,cc._RF.pop()},{}],local_info:[function(e,t,o){"use strict";cc._RF.push(t,"b107awbVQ5GK6TUaRl3SYHw","local_info");var i,n=e,a=t,r=o;i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},a=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.LocalInfo=r.sLocalInfoEvent=r.LocalPlayerInfoRecord=r.LocalPlayerAdRecord=void 0;var c=n("event_config"),s=n("ganalytics"),l=n("gtime"),d=n("ggame"),u=n("ggame_data");function p(){this.oid=0,this.installVersion=0,this.version=0,this.firstLoginTimestamp=0,this.dailyLoginTick=0,this.dailyLoginTimes=0,this.onlineSecondsToday=0,this.onlineSeconds=0,this.loginTimes=0,this.logoutTimeTick=0,this.name=""}n=n("gmodule"),r.LocalPlayerAdRecord=function(){this.oid=0,this.rewardedVideoAdTimes=0,this.totalTimes=0},r.LocalPlayerInfoRecord=p,r.sLocalInfoEvent={dailyFirstLoginGame:"sLocalInfoEvent_dailyFirstLoginGame",offlineStateChanged:"sLocalInfoEvent_offlineStateChanged"};var h,y=[10,20,50,100,200,500,1e3];function f(){var e=null!==h&&h.apply(this,arguments)||this;return e._dataVersion=2,e.localModel=null,e.data=null,e._dataDirty=!1,e.launchVersion=0,e.offlineDuration=0,e._onlineMinutesReportIndex=0,e._dataDirtyOfUpdate=!1,e._playDaysString=null,e}a(f,h=n.GModule),f.prototype._initOnlineMinutesReport=function(){this._onlineMinutesReportIndex=0;for(var e=this.data.onlineSeconds/60,t=0;t<y.length;++t)if(e<y[t]){this._onlineMinutesReportIndex=t;break}},f.prototype._updateOnlineMinutesReport=function(){var e=Math.floor(this.data.onlineSeconds/60);this._onlineMinutesReportIndex<y.length&&e>=y[this._onlineMinutesReportIndex]&&(this._onlineMinutesReportIndex++,s.sGAnalytics.reportAnalytics(c.sEventConfig.config.onlineTime,{days:this.getPlayDayCountForReport(),mins:e.toString()}))},f.prototype.init=function(e){u.sGGameData.addTable(u.sGGameDataType.local,"playerInfo",new p),this.localModel=e},f.prototype.load=function(){this.data=this.localModel.localData.playerInfo,this.data.version||(this.data.logoutTimeTick=l.sGTime.timestamp(),this.data.firstLoginTimestamp=l.sGTime.timestamp(),this.data.loginTimes=1,this.data.installVersion=this._dataVersion,this._dataDirty=!0),this.launchVersion=this.data.version,this.data.version=this._dataVersion,l.sGTime.timestamp()<this.data.logoutTimeTick&&l.sGTime.resetStartTime(this.data.logoutTimeTick),this._initOnlineMinutesReport()},f.prototype.start=function(){var e=l.sGTime.timestamp();864e5<=e-l.sGTime.midnight(this.data.dailyLoginTick).getTime()&&(this.data.dailyLoginTick=e,this.data.dailyLoginTimes=0),0===this.data.dailyLoginTimes&&(e=this.getPlayDayCountForReport(),s.sGAnalytics.reportAnalytics(c.sEventConfig.config.dailyFirstLoginGame,{days:e}),"0"==e&&s.sGAnalytics.reportAnalytics(c.sEventConfig.config.firstLoginGame),d.sGGame.emit(r.sLocalInfoEvent.dailyFirstLoginGame,e)),this.data.dailyLoginTimes++,this.data.loginTimes++,this._dataDirty=!0},f.prototype.save=function(){this._dataDirty&&(this._dataDirty=!1,this.localModel.database.update("playerInfo",this.data))},f.prototype.update=function(){this.checkOffline()},f.prototype.update1=function(e){e<2&&(this.data.onlineSecondsToday+=e,this.data.onlineSeconds+=e,this._dataDirty=!0,this._updateOnlineMinutesReport()),this._dataDirtyOfUpdate&&(this._dataDirtyOfUpdate=!1,this._dataDirty=!0)},f.prototype.dailyClear=function(){this._playDaysString=null;var e,t=l.sGTime.timestamp();864e5<=t-l.sGTime.midnight(this.data.dailyLoginTick).getTime()&&(e=this.getPlayDayCountForReport(),s.sGAnalytics.reportAnalytics(c.sEventConfig.config.dailyFirstLoginGame,{days:e}),this.data.dailyLoginTick=t,this.data.dailyLoginTimes=1),this.data.onlineSecondsToday=0,this._dataDirty=!0},f.prototype.getPlayDayCountForReport=function(){var e;return this._playDaysString||(this.data.firstLoginTimestamp?(e=l.sGTime.timestamp()-l.sGTime.midnight(this.data.firstLoginTimestamp).getTime())<864e5?this._playDaysString="0":(e=Math.floor(e/864e5),this._playDaysString=999<e?"999":899<e?"899":799<e?"799":699<e?"699":599<e?"599":499<e?"499":399<e?"399":299<e?"299":199<e?"199":99<e?"99":e+""):this._playDaysString="noDay"),this._playDaysString},f.prototype.getOnlineMinutesForReport=function(){var e=Math.floor(this.data.onlineSeconds/60);return(e<=30?e:e=e<=60?5*Math.floor(e/5):e<=120?10*Math.floor(e/10):e<=720?30*Math.floor(e/30):e<6e3?60*Math.floor(e/60):6e3).toString()},f.prototype.getOnlineSeconds=function(){return this.data.onlineSeconds},f.prototype.getOnlineSecondsToday=function(){return this.data.onlineSecondsToday},f.prototype.getSecondsSinceFirstLogin=function(){return(l.sGTime.timestamp()-this.data.firstLoginTimestamp)/1e3},f.prototype.onTimeElapse=function(e){this.data.logoutTimeTick=this.data.logoutTimeTick-1e3*e,this.checkOffline()},f.prototype.checkOffline=function(){var e=l.sGTime.timestamp(),t=Math.floor((e-this.data.logoutTimeTick)/1e3);t<=300?5<t&&(this.data.logoutTimeTick=e,this._dataDirty=!0):(this.data.logoutTimeTick=e,this.offlineDuration=t,d.sGGame.emit(r.sLocalInfoEvent.offlineStateChanged,t),this._dataDirty=!0)},a=f,r.LocalInfo=a,cc._RF.pop()},{}],login_init:[function(e,t,o){"use strict";cc._RF.push(t,"31905CgJmhIpZtN3imWf4+Z","login_init");var i=e,n=o;Object.defineProperty(n,"__esModule",{value:!0});var a=i("glog"),r=i("ggame"),c=i("gview_model"),s=i("client_login"),l=i("client_network"),d=i("client_sync"),u=i("local_ad"),p=i("local_auth"),h=i("local_cloud_storage"),y=i("local_currency"),f=i("local_encourage"),g=i("local_guide"),_=i("local_info"),m=i("vm_ad"),v=i("vm_auth"),G=i("vm_cloud_storage"),b=i("vm_encourage"),C=i("vm_guide"),k=i("vm_login"),A=i("vm_setting");n=i("vm_share"),i=i("vm_ui"),a.sGLog.log("resources bundle script init"),c.sGViewModel.addModule(m.VMAd),c.sGViewModel.addModule(b.VMEncourage),c.sGViewModel.addModule(i.VMUI),c.sGViewModel.addModule(G.VMCloudStorage),c.sGViewModel.addModule(A.VMSetting),c.sGViewModel.addModule(v.VMAuth),c.sGViewModel.addModule(k.VMLogin),c.sGViewModel.addModule(n.VMShare),c.sGViewModel.addModule(C.VMGuide),r.sGGame.localModel.addModule(p.LocalAuth),r.sGGame.localModel.addModule(f.LocalEncourage),r.sGGame.localModel.addModule(u.LocalAd),r.sGGame.localModel.addModule(h.LocalCloudStorage),r.sGGame.localModel.addModule(_.LocalInfo),r.sGGame.localModel.addModule(g.LocalGuide),r.sGGame.localModel.addModule(y.LocalCurrency),r.sGGame.clientModel.addModule(l.ClientNetwork),r.sGGame.clientModel.addModule(d.ClientSync),r.sGGame.clientModel.addModule(s.ClientLogin),cc._RF.pop()},{}],reddot:[function(e,t,o){"use strict";cc._RF.push(t,"4e632KP12RASLFWmJ/4LNb0","reddot");var i,n=o,a=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0});var r,c=(s=cc._decorator).ccclass,s=(s.property,s.menu);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.callback=null,e.reddotNode=null,e.updateDt1=.1,e}a(l,r=cc.Component),l.prototype.init=function(e,t){this.callback=e,this.reddotName=t,this.node.activeInHierarchy&&t&&(this.reddotNode=cc.find(this.reddotName||"reddot",this.node),this.updateDt1=1)},l.prototype.onEnable=function(){this.reddotNode=cc.find(this.reddotName||"reddot",this.node),this.updateDt1=1},l.prototype.update=function(e){this.reddotNode&&this.callback&&(this.updateDt1+=e,.1<=this.updateDt1&&(this.updateDt1=0,this.reddotNode.active=this.callback()))},s=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r}([c,s("Game/Reddot/Reddot")],l),n.default=s,cc._RF.pop()},{}],res_debug_ui:[function(e,t,o){"use strict";cc._RF.push(t,"7e147aCdapGN6pNEZqV+lSB","res_debug_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("client_config"),d=n("gui"),u=n("gtime"),p=n("gview_model"),h=n("vm_login"),y=(f=cc._decorator).ccclass,f=(n=f.property,f.menu);function g(){var e=null!==s&&s.apply(this,arguments)||this;return e.drawCallsLabel=null,e.resLabel=null,e.networkStateLabel=null,e.topUINameLabel=null,e.rootNode=null,e.switchButton=null,e.infoRoot=null,e.timeLabel=null,e.dtPer=0,e}r(g,s=cc.Component),g.prototype.onLoad=function(){var e=this;this.switchButton&&this.switchButton.node.on("click",function(){e.infoRoot&&(e.infoRoot.active=!e.infoRoot.active)})},g.prototype.start=function(){this.drawCallsLabel&&(this.drawCallsLabel.string=cc.renderer.drawCalls+""),this.resLabel&&(this.resLabel.string=cc.assetManager.assets.count+""),this.networkStateLabel&&(this.networkStateLabel.string="")},g.prototype.onEnable=function(){this.rootNode&&(this.rootNode.active=l.sClientConfig.config.devMode),this.infoRoot&&(this.infoRoot.active=!1)},g.prototype.update=function(e){this.dtPer=this.dtPer+e,.2<this.dtPer&&(this.dtPer=0,this.drawCallsLabel&&(this.drawCallsLabel.string=cc.renderer.drawCalls+""),this.resLabel&&(this.resLabel.string=cc.assetManager.assets.count+""),this.networkStateLabel&&(p.sGViewModel.getModule(h.VMLogin).isLogined,this.networkStateLabel.string="0"),this.topUINameLabel&&(this.topUINameLabel.string=d.sGUI.getTopName()),this.timeLabel&&(this.timeLabel.string=u.sGTime.format(u.sGTime.timestamp())))},c([n({type:cc.Label,tooltip:"\u663e\u793a\u6279\u6b21\u4fe1\u606f"})],g.prototype,"drawCallsLabel",void 0),c([n({type:cc.Label,tooltip:"\u663e\u793a\u8d44\u6e90\u6570\u4fe1\u606f"})],g.prototype,"resLabel",void 0),c([n({type:cc.Label,tooltip:"\u663e\u793a\u7f51\u7edc\u72b6\u6001"})],g.prototype,"networkStateLabel",void 0),c([n({type:cc.Label,tooltip:"\u663e\u793a\u6700\u4e0a\u5c42\u754c\u9762"})],g.prototype,"topUINameLabel",void 0),c([n({type:cc.Node,tooltip:"\u63a7\u5236\u663e\u793a\u9690\u85cf\u7684\u6839\u8282\u70b9"})],g.prototype,"rootNode",void 0),c([n({type:cc.Button,tooltip:"\u5f00\u5173"})],g.prototype,"switchButton",void 0),c([n({type:cc.Node,tooltip:"\u63a7\u5236\u663e\u793a\u9690\u85cf\u7684\u6839\u8282\u70b9"})],g.prototype,"infoRoot",void 0),c([n({type:cc.Label,tooltip:"\u663e\u793a\u65f6\u95f4"})],g.prototype,"timeLabel",void 0),f=c([y,f("Game/UI/ResDebugUI")],g),a.default=f,cc._RF.pop()},{}],skip_ad_ui:[function(e,t,o){"use strict";cc._RF.push(t,"e9004TQBstF/bkBTKFviGdy","skip_ad_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("audio_config"),d=n("client_config"),u=n("i18n"),p=n("gaudio"),h=n("gnode"),y=n("thirdplatform_util"),f=(g=cc._decorator).ccclass,g=(n=g.property,g.menu),_=0;function m(){var e=null!==s&&s.apply(this,arguments)||this;return e.buttonClose=null,e.buttonSkip=null,e.labelDesc=null,e.nodeShare=null,e.nodeBuy=null,e.labelPrice=null,e.callback=null,e.myID=0,e}r(m,s=cc.Component),m.prototype.reset=function(e){this.callback=e},m.prototype.onLoad=function(){var e=this;this.myID=++_,console.log("myid: ",this.myID),this.buttonSkip&&this.buttonSkip.node.on("click",function(){var t;p.sGAudio.playEffect(l.sAudioConfig.config.buttonClick),"share"==d.sClientConfig.config.skipAdType&&(console.log("skip ad click!",e.callback),t=e.callback,y.sThirdPlatformUtil.share("","","",t)),h.sGNode.destoryNode(e.node)}),this.buttonClose&&this.buttonClose.node.on("click",function(){p.sGAudio.playEffect(l.sAudioConfig.config.buttonClose),h.sGNode.destoryNode(e.node)})},m.prototype.onEnable=function(){this.nodeShare&&(this.nodeShare.active="share"==d.sClientConfig.config.skipAdType),this.nodeBuy&&(this.nodeBuy.active="buy"==d.sClientConfig.config.skipAdType),this.labelPrice&&(this.labelPrice.string=""),this.labelDesc&&("share"==d.sClientConfig.config.skipAdType?this.labelDesc.string=u.i18n.t("ad.ADNotReadyButCanSkipByShare"):"buy"==d.sClientConfig.config.skipAdType?this.labelDesc.string=u.i18n.t("ad.ADNotReadyButCanSkip"):this.labelDesc.string="Error!")},m.prototype.onDisable=function(){},c([n(cc.Button)],m.prototype,"buttonClose",void 0),c([n(cc.Button)],m.prototype,"buttonSkip",void 0),c([n(cc.Label)],m.prototype,"labelDesc",void 0),c([n({tooltip:"\u786e\u8ba4\u6309\u94ae\u4e0a\u7684\u5206\u4eab\u5c55\u793a\u5185\u5bb9",type:cc.Node})],m.prototype,"nodeShare",void 0),c([n({tooltip:"\u786e\u8ba4\u6309\u94ae\u4e0a\u7684\u94bb\u77f3\u8d2d\u4e70\u5185\u5bb9",type:cc.Node})],m.prototype,"nodeBuy",void 0),c([n({tooltip:"\u94bb\u77f3\u4ef7\u683c",type:cc.Label})],m.prototype,"labelPrice",void 0),g=c([f,g("Game/UI/SkipAdUI")],m),a.default=g,cc._RF.pop()},{}],smallgame_nodes:[function(e,t,o){"use strict";cc._RF.push(t,"965df1NjiJIZJJs4llH3J7m","smallgame_nodes");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=n("client_config"),d=(u=cc._decorator).ccclass,u=(n=u.property,u.menu);function p(){var e=null!==s&&s.apply(this,arguments)||this;return e.visibleNodeArray=[],e.invisibleNodeArray=[],e}r(p,s=cc.Component),p.prototype.init=function(){},p.prototype.onEnable=function(){if(this.visibleNodeArray)for(var e=0;e<this.visibleNodeArray.length;++e){var t=this.visibleNodeArray[e];t&&(t.active=l.sClientConfig.config.smallGame)}if(this.invisibleNodeArray)for(e=0;e<this.invisibleNodeArray.length;++e){var o=this.invisibleNodeArray[e];o&&(o.active=!l.sClientConfig.config.smallGame)}},c([n({displayName:"\u5c0f\u6e38\u620f\u5c55\u793a\u8282\u70b9\u5217\u8868",type:cc.Node})],p.prototype,"visibleNodeArray",void 0),c([n({displayName:"\u5c0f\u6e38\u620f\u9690\u85cf\u8282\u70b9\u5217\u8868",type:cc.Node})],p.prototype,"invisibleNodeArray",void 0),u=c([d,u("Game/UI/SmallGameNode")],p),a.default=u,cc._RF.pop()},{}],vm_ad:[function(e,t,o){"use strict";cc._RF.push(t,"2cecd2w3uJJ5Zi/PXjd8O56","vm_ad");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMAd=a.sVMAdEventType=void 0;var c,s=n("client_config"),l=n("event_config"),d=n("gui"),u=n("ganalytics"),p=n("gaudio"),h=n("glog"),y=n("gtime"),f=n("thirdplatform"),g=n("thirdplatform_util"),_=n("ggame"),m=n("gmodule"),v=n("local_ad"),G=n("local_info"),b=n("fake_ad_ui");function C(){var e=null!==c&&c.apply(this,arguments)||this;return e.showRewardedVideoAdTick=0,e}a.sVMAdEventType={preShowRewardedVideoAd:"sVMAdEventType.preShowRewardedVideoAd",startShowRewardedVideoAd:"sVMAdEventType.startShowRewardedVideoAd",endShowRewardedVideoAd:"sVMAdEventType.endShowRewardedVideoAd"},r(C,c=m.GModule),C.prototype.preShowRewardedVideoAd=function(e,t){g.sThirdPlatformUtil.preShowRewardedVideoAd(e),_.sGGame.emit(a.sVMAdEventType.preShowRewardedVideoAd,e,t)},C.prototype.showRewardedVideoAd=function(e,t,o){var i=this;e&&_.sGGame.localModel.getModule(v.LocalAd).canShowRewardedVideoAd()?s.sClientConfig.config.skipAd?(_.sGGame.localModel.getModule(v.LocalAd).addRewardedVideoAdShownCount(),o(0)):(h.sGLog.log("showRewardedVideoAd",e),u.sGAnalytics.reportAnalytics(l.sEventConfig.config.adStart,{days:_.sGGame.localModel.getModule(G.LocalInfo).getPlayDayCountForReport()}),d.sGUI.openLoading("showRewardedVideoAd",function(){g.sThirdPlatformUtil.showRewardedVideoAd(e,function(e){d.sGUI.closeLoading("showRewardedVideoAd"),u.sGAnalytics.reportAnalytics(l.sEventConfig.config.adFailed,{days:_.sGGame.localModel.getModule(G.LocalInfo).getPlayDayCountForReport()}),o&&o(e)},function(){cc.director.pause(),p.sGAudio.pause(),i.showRewardedVideoAdTick=y.sGTime.timestamp(),u.sGAnalytics.reportAnalytics(l.sEventConfig.config.adLoaded,{days:_.sGGame.localModel.getModule(G.LocalInfo).getPlayDayCountForReport()}),_.sGGame.emit(a.sVMAdEventType.startShowRewardedVideoAd,e,t)},function(n){var r,c;_.sGGame.localModel.getModule(v.LocalAd).fixAdTime((y.sGTime.timestamp()-i.showRewardedVideoAdTick)/1e3),cc.director.resume(),p.sGAudio.resume(),d.sGUI.closeLoading("showRewardedVideoAd"),_.sGGame.emit(a.sVMAdEventType.endShowRewardedVideoAd,e,t,n),n?((c=_.sGGame.localModel.getModule(v.LocalAd)).onAdFinish(),r=_.sGGame.localModel.getModule(G.LocalInfo).getPlayDayCountForReport(),n=c.totalTimes,200<(c=c.todayAdTimes)&&(c=200),u.sGAnalytics.reportAnalytics(l.sEventConfig.config.adFinished,{days:r,totalTimes:(n=200<n?200:n).toString(),todayAdTimes:c.toString()}),_.sGGame.localModel.getModule(v.LocalAd).addRewardedVideoAdShownCount(),o&&o(0)):(u.sGAnalytics.reportAnalytics(l.sEventConfig.config.adNotFinished,{days:_.sGGame.localModel.getModule(G.LocalInfo).getPlayDayCountForReport()}),o&&o(f.eShowRewardedVideoAdError.notFinished))})})):o&&o(f.eShowRewardedVideoAdError.notReady)},C.prototype.showSkipRewardedVideoAd=function(){d.sGUI.openDialogUI("prefabs/ui/jump_advertisement_message_box",function(){})},C.prototype.openFakeAdUI=function(e){d.sGUI.openDialogUI("prefabs/ui/fake_ad_ui",function(t){(t=t.getComponent(b.default))&&t.init(e)})},r=C,a.VMAd=r,cc._RF.pop()},{}],vm_auth:[function(e,t,o){"use strict";cc._RF.push(t,"a2c91ySHoJPo5H+VbgHrjxy","vm_auth");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMAuth=void 0;var c,s=n("i18n"),l=n("thirdplatform"),d=n("thirdplatform_util"),u=n("ggame"),p=n("gmodule"),h=n("gview_model"),y=n("local_auth"),f=n("vm_cloud_storage"),g=n("vm_ui");function _(){return null!==c&&c.apply(this,arguments)||this}r(_,c=p.GModule),_.prototype.auth=function(e,t){var o=this,i=u.sGGame.localModel;if(i){if(e===l.eAuthType.nil&&(e=(e=i.getModule(y.LocalAuth).authType)===l.eAuthType.nil?d.sThirdPlatformUtil.getAuthType()[0]:e)===l.eAuthType.nil)return console.log("AuthCtrl.auth localModel auth nil!"),void(t&&t(!1));d.sThirdPlatformUtil.auth(e,function(n){n?(o.authType=e,i.getModule(y.LocalAuth).authType===l.eAuthType.nil&&o.updateAuth(e)):e!==l.eAuthType.default&&h.sGViewModel.getModule(g.VMUI).openMessageBoxOKUI(s.i18n.t("authError."+l.eAuthType[e])),t&&t(n)})}else console.log("AuthCtrl.auth localModel is not prepared!"),t&&t(!1)},_.prototype.bindFirstAuthType=function(e){for(var t=l.eAuthType.anonymous,o=d.sThirdPlatformUtil.getAuthType(),i=0;i<o.length;++i){var n=o[i];if(n!==l.eAuthType.anonymous){t=n;break}}this.bind(t,e)},_.prototype.bind=function(e,t){var o=this;console.log("AuthCtrl.bind localModel bind ",e);var i=u.sGGame.localModel;i?e!==l.eAuthType.nil&&e!==l.eAuthType.anonymous?(i=i.getModule(y.LocalAuth)).authType===l.eAuthType.nil||i.authType===l.eAuthType.anonymous?this.auth(e,function(i){i&&o.updateAuth(e),t&&t(i)}):(console.log("AuthCtrl.bind localModel has been binded!"),t&&t(!1)):(console.log("AuthCtrl.bind authType must not be eAuthType.nil or eAuthType.anonymous!"),t&&t(!1)):(console.log("AuthCtrl.bind localModel is not prepared!"),t&&t(!1))},_.prototype.updateAuth=function(e){var t=u.sGGame.localModel.getModule(y.LocalAuth);t.authType=e,t.openIDType=d.sThirdPlatformUtil.getOpenIDType(),t.openID=d.sThirdPlatformUtil.getOpenID(),h.sGViewModel.getModule(f.VMCloudStorage).autoSave()},r=_,a.VMAuth=r,cc._RF.pop()},{}],vm_cloud_storage:[function(e,t,o){"use strict";cc._RF.push(t,"7a9a8yNn9NN4JVuTLRSESh4","vm_cloud_storage");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMCloudStorage=void 0;var c,s=n("i18n"),l=n("gui"),d=n("glog"),u=n("thirdplatform_util"),p=n("ggame"),h=n("gmodule"),y=n("gview_model"),f=n("vm_app"),g=n("local_auth"),_=n("local_cloud_storage"),m=n("vm_ui");function v(){return null!==c&&c.apply(this,arguments)||this}r(v,c=h.GModule),v.prototype.start=function(){var e=this;p.sGGame.on(_.sLocalCloudStorageEvent.remoteDataConflict,function(t,o){var i=s.i18n.t("remoteData.useRemoteDataWarning");l.sGUI.openMessageBoxOKUI(i,function(){e.reloadRemoteData(t,!0,o)},!0)},this)},v.prototype.stop=function(){p.sGGame.targetOff(this)},v.prototype.setCheckConflictCallback=function(e){p.sGGame.localModel.getModule(_.LocalCloudStorage).setCheckConflictCallback(e)},v.prototype.executeReload=function(e){p.sGGame.localModel.getModule(_.LocalCloudStorage).reloadRemoteData(e),y.sGViewModel.restart()},v.prototype.reloadRemoteData=function(e,t,o){var i=this;t?(t=y.sGViewModel.getModule(f.VMApp)).isInGameScene?t.enterGameScene("reloadRemoteData",function(){i.executeReload(e),y.sGViewModel.getModule(v).autoSave(),o&&o()}):(this.executeReload(e),o&&o()):p.sGGame.localModel.getModule(_.LocalCloudStorage).saveRemoteData(function(){o&&o()})},v.prototype._load=function(e){p.sGGame.localModel.getModule(_.LocalCloudStorage).loadRemoteData(function(t){t||d.sGLog.error("VMCloudStorage load fail!"),e&&e(t)})},v.prototype.save=function(e){p.sGGame.localModel.getModule(_.LocalCloudStorage).saveRemoteData(function(t){t||d.sGLog.error("VMCloudStorage save fail!"),e&&e(t)})},v.prototype.autoSave=function(){y.sGViewModel.getModule(f.VMApp).isInGameScene&&p.sGGame.localModel.getModule(_.LocalCloudStorage).autoSave()},v.prototype.checkStorageID=function(e){var t=p.sGGame.localModel.getModule(g.LocalAuth),o=u.sThirdPlatformUtil.getOpenIDType(),i=u.sThirdPlatformUtil.getOpenID();o!=t.openIDType||""!=i&&i!=t.openID?(console.log("localAuth changed",o,i,t.openIDType,t.openID),this.loadCloudStoage(e)):e&&e(!0)},v.prototype.loadCloudStoage=function(e,t){var o=this,i=y.sGViewModel.getModule(m.VMUI);i.openLoadingUI("loadCloudStoage"),this._load(function(n){i.closeLoadingUI("loadCloudStoage"),n?e&&e(!0):i.openMessageBoxOKUI("cloudStorage.retryLoad",function(){t?o.loadCloudStoage(e,!0):e&&e(!1)})})},r=v,a.VMCloudStorage=r,cc._RF.pop()},{}],vm_encourage:[function(e,t,o){"use strict";cc._RF.push(t,"cd47eqSZLZErrVs91RxqvAM","vm_encourage");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMEncourage=a.EncourageReportAnalytics=a.eEncourageType=void 0;var c,s,l=n("client_config"),d=n("encourage_config"),u=n("event_config"),p=n("channel_config_manager"),h=n("i18n"),y=n("gui"),f=n("ganalytics"),g=n("glog"),_=n("thirdplatform"),m=n("ggame"),v=n("gmodule"),G=n("gview_model"),b=n("vm_app"),C=n("local_encourage"),k=n("local_info"),A=n("encourage_message_box_ui"),M=n("vm_ad"),T=n("vm_share"),S=n("vm_ui");function D(){var e=null!==s&&s.apply(this,arguments)||this;return e.uglyStartTime=0,e.uglyEndTime=0,e._isUgly=!0,e._skipAd=!1,e}(n=c=a.eEncourageType||(a.eEncourageType={}))[n.closed=-2]="closed",n[n.free=-1]="free",n[n.share=0]="share",n[n.rewardedVideoAd=1]="rewardedVideoAd",n[n.interstitialAd=2]="interstitialAd",n[n.subscribeFree=3]="subscribeFree",a.EncourageReportAnalytics=function(){},r(D,s=v.GModule),D.prototype.start=function(){this._skipAd=l.sClientConfig.config.skipAd},D.prototype._getEncourageType=function(e){var t=c.closed;if(!e)return console.error("getEncourageType error, encourageEntry is not exist!"),t;var o,i=!0;(n=l.sClientConfig.config[e.id+"DailyEncourageType"])||(n=l.sClientConfig.config[e.id+"EncourageType"],i=!1);for(var n=n||c[c.rewardedVideoAd],a=(n=this.skipAd&&n===c[c.closed]?c[c.rewardedVideoAd]:n).split(","),r=0;r<a.length;++r)if(s=a[r].split(":")){var s,d=s[0];if(null==(s=s[1]?parseInt(s[1]):null)){o=d;break}if(!(s<=0)&&m.sGGame.localModel.getModule(C.LocalEncourage).getEncourageTimes(e.id,i)<s){o=d;break}}return void 0===(t=c[o])&&console.error("getEncourageType error! key:",e.id),t},D.prototype.preEncourage=function(e,t){return e="string"==typeof e?d.sEncourageConfig.getEntry(e):e,void 0===(t=t||this._getEncourageType(e))||this._reportPreEncourage(e,t),t},D.prototype._reportPreEncourage=function(e,t){f.sGAnalytics.reportAnalytics(u.sEventConfig.config.encourageRequest,{days:m.sGGame.localModel.getModule(k.LocalInfo).getPlayDayCountForReport(),encourageID:e.id,encourageType:c[t]}),t===c.rewardedVideoAd&&(t=p.sChannelConfigManager.getRewardedVideoAdPosId(e.adId),G.sGViewModel.getModule(M.VMAd).preShowRewardedVideoAd(t,e.comment))},D.prototype.encourage=function(e,t,o){var i,n,a=this;(i="string"==typeof e?d.sEncourageConfig.getEntry(e):e)&&c[t]?(this._reportEncourageStart(t,i.id),n=function(e,n){n?(a._reportEncourageFinish(t,e,i.id),m.sGGame.localModel.getModule(C.LocalEncourage).addEncourageTimes(i.id),o&&o()):a._reportPreEncourage(i,t)},t===c.rewardedVideoAd?(e=p.sChannelConfigManager.getRewardedVideoAdPosId(i.adId),G.sGViewModel.getModule(M.VMAd).showRewardedVideoAd(e,i.comment,function(e,t){var o;0===e?n(!1,!0):("share"!==l.sClientConfig.getAll().skipAdType&&!l.sClientConfig.getAll()[i.id+"EncourageSkipAd"]||e!==_.eShowRewardedVideoAdError.notReady?(o=e==_.eShowRewardedVideoAdError.systemError?h.i18n.t("ad.systemError"):e==_.eShowRewardedVideoAdError.notFinished?h.i18n.t("ad.notEnded"):h.i18n.t("ad.userError"),G.sGViewModel.getModule(S.VMUI).addMessageTip(o),n(!1,!1)):m.sGGame.localModel.getModule(C.LocalEncourage).canSkipAd()?G.sGViewModel.getModule(M.VMAd).showSkipRewardedVideoAd(function(e){m.sGGame.localModel.getModule(C.LocalEncourage).addSkipAdTimes(),n(!0,e)}):(o=h.i18n.t("ad.userError"),G.sGViewModel.getModule(S.VMUI).addMessageTip(o),n(!1,!1)),t&&(G.sGViewModel.getModule(S.VMUI).addMessageTip(t),y.sGUI.openMessageBoxOKUI(t)))})):t===c.share?G.sGViewModel.getModule(T.VMShare).share(h.i18n.t("share.shareTitle"),null,void 0,function(){n(!1,!0)}):t!==c.interstitialAd&&t!==c.free||n(!1,!0)):g.sGLog.error("encourage error! id:",i?i.id:"","encourageType:",t)},D.prototype._reportEncourageStart=function(e,t){f.sGAnalytics.reportAnalytics(u.sEventConfig.config.encourageStart,{days:m.sGGame.localModel.getModule(k.LocalInfo).getPlayDayCountForReport(),encourageID:t,encourageType:c[e]})},D.prototype._reportEncourageFinish=function(e,t,o){f.sGAnalytics.reportAnalytics(t?u.sEventConfig.config.encourageSkipped:u.sEventConfig.config.encourageFinished,{days:m.sGGame.localModel.getModule(k.LocalInfo).getPlayDayCountForReport(),encourageID:o,encourageType:c[e],encourageTypeAndID:c[e]+"_"+o})},Object.defineProperty(D.prototype,"skipAd",{get:function(){return this._skipAd},set:function(e){this._skipAd=e},enumerable:!1,configurable:!0}),D.prototype.openEncourageMessageBox=function(e,t,o,i){y.sGUI.openDialogUI(G.sGViewModel.getModule(b.VMApp).encourageMessageBoxPrefab,function(i){i&&i.getComponent(A.default).reset(e,t,o)},i)},r=D,a.VMEncourage=r,cc._RF.pop()},{}],vm_guide:[function(e,t,o){"use strict";cc._RF.push(t,"ce3c4W5aBxPg59KxcN/GWxk","vm_guide");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMGuide=a.sGuideEventType=void 0;var c,s=n("client_config"),l=n("gui"),d=n("glog"),u=n("common_guide_config"),p=n("ggame"),h=n("gmodule"),y=n("local_guide"),f=n("guide_ui");function g(){var e=null!==c&&c.apply(this,arguments)||this;return e._guideDoingOrDone=[],e._guideWaitArray=[],e._currentGuideEntry=null,e._currentStepEntryID=0,e._currentStepEntry=null,e.nextStepID=0,e._guideUI=null,e}a.sGuideEventType={openGuide:"sGuideEventType.openGuide",openGuideStep:"sGuideEventType.openGuideStep",finishGuide:"sGuideEventType.finishGuide"},r(g,c=h.GModule),g.prototype.start=function(){var e=this;p.sGGame.on(p.sGGameEvent.afterUpdate,function(){e.eventCheck(),e.customUpdate()},this),this._firstCheck()},g.prototype.stop=function(){p.sGGame.targetOff(this),this._guideDoingOrDone=[],this._guideWaitArray=[],this._currentGuideEntry=null,this._currentStepEntryID=0,this._currentStepEntry=null},g.prototype.pushBackGuide=function(e){this._guideWaitArray.push(e),this._guideDoingOrDone.push(e.id)},g.prototype.popFrontGuide=function(){return 0==this._guideWaitArray.length?null:this._guideWaitArray.shift()},g.prototype._firstCheck=function(){for(var e in this._guideDoingOrDone=[],this._guideWaitArray=[],this._currentGuideEntry=null,this._currentStepEntryID=0,this._currentStepEntry=null,u.sGuideConfig.guides)u.sGuideConfig.getGuide(e);this._checkGuide()},g.prototype.eventCheck=function(){this._checkGuide()},g.prototype._checkGuide=function(){if(!l.sGUI.isLoading())for(var e in u.sGuideConfig.guides)e=u.sGuideConfig.getGuide(parseInt(e)),-1==this._guideDoingOrDone.indexOf(e.id)&&(this.isGuideFinished(e.id)?this._guideDoingOrDone.push(e.id):e.guideCheckOpen&&e.guideGetInitStep&&e.guideCheckOpen()&&(d.sGLog.log("push guide entry, id is ",e.id),this.pushBackGuide(e),e.onGuideLoad&&e.onGuideLoad()))},g.prototype.testGuide=function(e){s.sClientConfig.config.skipGuide=!0,this._currentGuideEntry=u.sGuideConfig.getGuide(e),this._currentStepEntryID=0},g.prototype.customUpdate=function(){this._currentGuideEntry||(this._currentGuideEntry=this.popFrontGuide()),this._currentGuideEntry&&this._currentStepEntryID<=0&&!l.sGUI.isLoading()&&(this._currentStepEntryID=this._currentGuideEntry.guideGetInitStep(l.sGUI.getTopName()),0<this._currentStepEntryID&&(this._currentGuideEntry.onGuideEnable&&this._currentGuideEntry.onGuideEnable(),p.sGGame.emit(a.sGuideEventType.openGuide,this._currentGuideEntry.id))),0<this._currentStepEntryID&&!this._currentStepEntry&&this._tryOpenGuide()},g.prototype._gotoNextStepID=function(e){this.nextStepID=e,!this._currentStepEntry.finish&&this.nextStepID||this.finishGuide(this._currentGuideEntry.id),this._currentStepEntry.onGuideStepDisable&&this._currentStepEntry.onGuideStepDisable(),this.nextStepID?(this._currentStepEntryID=this.nextStepID,this.nextStepID=0,this._currentStepEntry=null):(d.sGLog.log("finish guide",this._currentGuideEntry.id,this._currentStepEntryID,this._currentStepEntry.clickNode),p.sGGame.emit(a.sGuideEventType.finishGuide,this._currentGuideEntry.id,this._currentStepEntryID,2),this._currentGuideEntry.onGuideDisable&&this._currentGuideEntry.onGuideDisable(),this._currentGuideEntry=null,this._currentStepEntry=null,this._currentStepEntryID=0,this._checkGuide()),this.customUpdate()},g.prototype._tryOpenGuide=function(){var e,t=this;this._currentStepEntryID<=0||((e=this._currentGuideEntry.steps[this._currentStepEntryID])?e.displayNode&&!l.sGUI.getNode(e.displayNode)||e.clickNode&&!l.sGUI.getNode(e.clickNode)||(this._currentStepEntry=e,d.sGLog.log("open guide",this._currentGuideEntry.id,this._currentStepEntryID,this._currentStepEntry.clickNode),p.sGGame.emit(a.sGuideEventType.openGuideStep,this._currentGuideEntry.id,this._currentStepEntryID),this._currentStepEntry.onGuideStepEnable&&this._currentStepEntry.onGuideStepEnable(),this.setAllScrollViewEnable(!1),this._openGuideUI(this._currentStepEntry,e.displayNode?l.sGUI.getNode(e.displayNode):null,e.clickNode?l.sGUI.getNode(e.clickNode):null,function(e){t._gotoNextStepID(e),t.setAllScrollViewEnable(!0)},function(){p.sGGame.emit(a.sGuideEventType.finishGuide,t._currentGuideEntry.id,t._currentStepEntryID,3),t.finishGuide(t._currentGuideEntry.id),t._currentStepEntry.onGuideStepDisable&&t._currentStepEntry.onGuideStepDisable(),t._currentGuideEntry.onGuideDisable&&t._currentGuideEntry.onGuideDisable(!0),t._currentGuideEntry=null,t._currentStepEntry=null,t._currentStepEntryID=0,t._checkGuide(),t.customUpdate(),t.setAllScrollViewEnable(!0)})):(d.sGLog.log("finish guide",this._currentGuideEntry.id,this._currentStepEntryID),p.sGGame.emit(a.sGuideEventType.finishGuide,this._currentGuideEntry.id,this._currentStepEntryID,1),this._currentGuideEntry=null,this._currentStepEntry=null,this._currentStepEntryID=0))},g.prototype.isGuideLockScrollView=function(){return this._currentStepEntry&&this._currentStepEntry.lockScrollView},g.prototype.isGuideOpened=function(){return 0<this._currentStepEntryID},g.prototype._openGuideUI=function(e,t,o,i,n){var a=this;return this._guideUI?this._guideUI.init(e,t,o,i,n,this._onCloseGuideUI.bind(this)):l.sGUI.openUI("prefabs/ui/guide_ui",l.sGUIZorder.guide,function(r){r&&(a._guideUI=r.getComponent(f.default),a._guideUI.init(e,t,o,i,n,a._onCloseGuideUI.bind(a)))},null),!0},g.prototype._onCloseGuideUI=function(){this._guideUI&&(this._guideUI=null)},g.prototype.isGuideFinished=function(e){return p.sGGame.localModel.getModule(y.LocalGuide).isGuideFinished(e)},g.prototype.finishGuide=function(e){p.sGGame.localModel.getModule(y.LocalGuide).finishGuide(e)},g.prototype.setAllScrollViewEnable=function(e){for(var t=cc.find("Canvas").getComponentsInChildren(cc.ScrollView),o=0;o<t.length;++o)t[o].getComponent(cc.PageView)||(t[o].enabled=e)},r=g,a.VMGuide=r,cc._RF.pop()},{}],vm_login:[function(e,t,o){"use strict";cc._RF.push(t,"ef62dktuBVNQb/qp0wdDg1g","vm_login");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMLogin=void 0;var c,s=n("client_config"),l=n("event_config"),d=n("i18n"),u=n("gui"),p=n("ganalytics"),h=n("gaudio"),y=n("glog"),f=n("gtime"),g=n("thirdplatform_util"),_=n("ggame"),m=n("gmodule"),v=n("gview_model"),G=n("vm_app"),b=n("client_login"),C=n("client_network"),k=n("local_auth");function A(){var e=null!==c&&c.apply(this,arguments)||this;return e.isLogging=!1,e.isLogined=!1,e.isFetchingTime=!1,e.isLoaded=!1,e}r(A,c=m.GModule),A.prototype.load=function(){var e,t,o,i=this;this.isLoaded||(this.isLoaded=!0,cc.director.on(g.sThirdPlatformEvent.onHide,function(){var e=_.sGGame.clientModel.getModule(C.ClientNetwork);e&&e.closeSocket("hide")}),_.sGGame.init(),(e=_.sGGame.clientModel.getModule(C.ClientNetwork)).setSessionRequestWaitingCallback(function(){_.sGGame.weakLoginMode||u.sGUI.openLoading("sessionRequest")}),e.setSessionRequestEndCallback(function(){_.sGGame.weakLoginMode||u.sGUI.closeLoading("sessionRequest")}),t=!1,o=function(){g.sThirdPlatformUtil.isShow?(y.sGLog.info("retry request!"),e.retry(function(t){y.sGLog.info("retry result: ",t),t||e.close("retryFailed")})):t=!0},e.setSocketDisconnectCallback(function(t){y.sGLog.info("socket disconnected!",t),e.sessionConnected()?(y.sGLog.info("socket disconnected, but session connected!"),o()):i.isLogined&&(_.sGGame.clientModel.exitGame(),y.sGLog.info("socket disconnected, and session disconnected too!"),_.sGGame.weakLoginMode?i.repeatedLogin():v.sGViewModel.getModule(G.VMApp).enterLaunchScene())}),cc.director.on(g.sThirdPlatformEvent.onShow,function(){h.sGAudio.resume(),t&&(t=!1,o()),i.isFetchingTime||(i.isFetchingTime=!0,v.sGViewModel.getModule(G.VMApp).fetchTime(function(){i.isFetchingTime=!1,u.sGUI.closeLoading("fetchTime"),f.sGTime.continue()}))}),cc.director.on(g.sThirdPlatformEvent.onHide,function(){h.sGAudio.pause(),i.isFetchingTime||(u.sGUI.openLoading("fetchTime"),f.sGTime.pause())}))},A.prototype.login=function(e){s.sClientConfig.config.onlineGame?_.sGGame.weakLoginMode?(this.repeatedLogin(),e&&e(!0)):this._login(e):e&&e(!0)},A.prototype._processLoginError=function(e,t){_.sGGame.weakLoginMode?t():u.sGUI.openMessageBoxOKUI(e,function(){t()})},A.prototype._login=function(e){var t=this;function o(o){var i;_.sGGame.weakLoginMode||u.sGUI.closeLoading("_login"),0!=o||(i=_.sGGame.clientModel.getModule(C.ClientNetwork))&&i.close("loginFailed"),t.isLogined=o,e&&e(o)}this.isLogined=!1,_.sGGame.weakLoginMode||u.sGUI.openLoading("_login"),y.sGLog.info("user login"),g.sThirdPlatformUtil.login(function(e,i,n){var a=_.sGGame.localModel.getModule(k.LocalAuth);n=a.localUUID,a=a.tempToken,y.sGLog.info("user login result: %s, %s error code: %d","funload",n,e),0==e?(_.sGGame.weakLoginMode||u.sGUI.openLoading("login"),_.sGGame.clientModel.getModule(b.ClientLogin).requestLogin("funload",n,a,function(e,i){_.sGGame.weakLoginMode||u.sGUI.closeLoading("login"),y.sGLog.info("game login result: %s, %s error code: %d","funload",n,e),0==e?(g.sThirdPlatformUtil.loginEnd(),0==i?t._requestAutoCreatePlayer(function(){t._requestPlayerJoin(function(e){o(e)})}):t._requestPlayerJoin(function(e){o(e)})):(y.sGLog.info("ooxx",d.i18n.t("login.serverIsNotOpen")),-1==e||1==e?t._processLoginError(d.i18n.t("login.serverIsNotOpen"),function(){o(!1)}):2==e?(g.sThirdPlatformUtil.loginEnd(),t._processLoginError(d.i18n.t("login.loginFailed"),function(){o(!1)})):3==e?t._processLoginError(d.i18n.t("login.doubleLogin"),function(){o(!1)}):4==e||5==e||6==e||7==e?t._processLoginError(d.i18n.t("login.versionIsNotMatch"),function(){o(!1)}):t._processLoginError(d.i18n.t("login.systemError"),function(){o(!1)}))})):t._processLoginError(d.i18n.t("login.loginFailed"),function(){o(!1)})})},A.prototype.repeatedLogin=function(e){var t=this;this.isLogging?e&&e(!1):(this.isLogging=!0,this._login(function(o){o?t.isLogging=!1:setTimeout(function(){t.isLogging=!1,t.repeatedLogin()},1e3*s.sClientConfig.config.retryLoginDelayTime),e&&e(o)}))},A.prototype._requestAutoCreatePlayer=function(e){g.sThirdPlatformUtil.getUserInfo(function(t,o,i){t?_.sGGame.clientModel.getModule(b.ClientLogin).requestCreatePlayer(o,i,0,function(t){y.sGLog.log("user create result: "+t),0==t?(p.sGAnalytics.reportAnalytics(l.sEventConfig.config.createPlayer),e(!0)):e(!1)}):e(!1)})},A.prototype._requestPlayerJoin=function(e){var t=this;_.sGGame.clientModel.getModule(b.ClientLogin).requestPlayerJoin(function(o){y.sGLog.log("user join result: "+o),0==o?t._onSyncPlayerDataFinish(e):e(!1)})},A.prototype._onSyncPlayerDataFinish=function(e){g.sThirdPlatformUtil.postKeyValueData("playerID",_.sGGame.clientModel.remoteData.info.oid.toString()),g.sThirdPlatformUtil.executeLaunchParam(),e(!0)},r=A,a.VMLogin=r,cc._RF.pop()},{}],vm_setting:[function(e,t,o){"use strict";cc._RF.push(t,"42e128CD+NKfLnrZsHBhq7j","vm_setting");var i,n,a=e,r=t,c=o;function s(){return null!==n&&n.apply(this,arguments)||this}i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},r=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),c.VMSetting=void 0,r(s,n=a("gmodule").GModule),r=s,c.VMSetting=r,cc._RF.pop()},{}],vm_share:[function(e,t,o){"use strict";cc._RF.push(t,"ca87egOnxNFGI/heN2XG6cS","vm_share");var i,n,a=e,r=t,c=o;function s(){return null!==n&&n.apply(this,arguments)||this}i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},r=function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),c.VMShare=void 0,r(s,n=a("gmodule").GModule),s.prototype.share=function(){},r=s,c.VMShare=r,cc._RF.pop()},{}],vm_ui:[function(e,t,o){"use strict";cc._RF.push(t,"de1dcl1RlRDG5vkdDLv9r6j","vm_ui");var i,n=e,a=o,r=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.VMUI=void 0;var c,s=n("gui"),l=n("i18n"),d=n("gapp"),u=n("message_tip_ui"),p=n("message_box_ui"),h=n("gmodule"),y=n("gnode"),f=n("time_out_destory");function g(){var e=null!==c&&c.apply(this,arguments)||this;return e.messageList=[],e.lastTick=0,e.timeElapsed=0,e.init=!1,e}r(g,c=h.GModule),g.prototype.openLoadingUI=function(e,t){s.sGUI.openLoading(e,t)},g.prototype.closeLoadingUI=function(e){s.sGUI.closeLoading(e)},g.prototype.openMessageBoxOKUI=function(e,t,o){this.openMessageBoxUI(p.MB_OK,null,e,t=void 0===t?null:t,o=void 0!==o&&o)},g.prototype.openMessageBoxOKCancelUI=function(e,t,o){this.openMessageBoxUI(p.MB_OKCANCEL,null,e,t,o=void 0!==o&&o)},g.prototype.openMessageBoxGotoCancelUI=function(e,t){this.openMessageBoxUI(p.MB_OKCANCEL,null,e,t,!1,"messagebox.gotoShop")},g.prototype.openMessageBoxUI=function(e,t,o,i,n,a){(n=void 0!==n&&n)?s.sGUI.openSystemUI("prefabs/common/message_box_ui",function(n){if(!n.getComponent(p.default).init(e,t,o,i,a))return!1},null):s.sGUI.openDialogUI("prefabs/common/message_box_ui",function(n){if(!n.getComponent(p.default).init(e,t,o,i,a))return!1},null)},g.prototype.openMessageBlackTipUI=function(e){s.sGUI.openNoticeUI("prefabs/common/message_tip_ui",function(t){if(!t.getComponent(u.default).reset(e))return!1},null)},g.prototype.openMessageTipUI=function(e){s.sGUI.openNoticeUI("prefabs/common/message_tip_ui",function(t){if(!t.getComponent(u.default).reset(e))return!1},null)},g.prototype.openStageTipUI=function(e){s.sGUI.openNoticeUI("prefabs/common/stage_tip_ui",function(t){if(!t.getComponent(u.default).reset(e))return!1},null)},g.prototype.openInputUI=function(){},g.prototype.openNotEnoughGem=function(){var e=l.i18n.t("currency.gemNotEnough");this.addMessageTip(e)},g.prototype.addMessageTip=function(e){var t=this;this.messageList[this.messageList.length]=e,this.init||(cc.director.on(d.sGAppEvent.update,function(e){t._update(e)}),this.init=!0)},g.prototype._update=function(e){this.timeElapsed+=e,0<this.messageList.length&&.2<this.timeElapsed-this.lastTick&&(e=this.messageList[0],this.messageList.splice(0,1),this.openMessageTipUI(e),this.lastTick=this.timeElapsed)},g.prototype.openTimeOutNoticeUI=function(e,t){void 0===t&&(t=1),s.sGUI.openNoticeUI(e,function(e){e&&(y.sGNode.addUniqueComponent(e,f.default).timeout=t)},this)},r=g,a.VMUI=r,cc._RF.pop()},{}]},{},["client_login","client_network","client_sync","encourage_icon_ui","encourage_message_box_ui","fake_ad_ui","guide_speak_ui","guide_ui","launch_login_ui","local_ad","local_auth","local_cloud_storage","local_currency","local_encourage","local_guide","local_info","login_init","reddot","res_debug_ui","skip_ad_ui","smallgame_nodes","vm_ad","vm_auth","vm_cloud_storage","vm_encourage","vm_guide","vm_login","vm_setting","vm_share","vm_ui"]);